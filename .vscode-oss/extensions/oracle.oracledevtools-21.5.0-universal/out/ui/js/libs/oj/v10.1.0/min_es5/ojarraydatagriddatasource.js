!function(){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */define(["exports","ojs/ojcore-base","ojs/ojdatasource-common"],function(e,r,o){"use strict";
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
var n=function(t,e,r,o,n){this.m_startRow=t,this.m_endRow=e,this.m_startColumn=r,this.m_endColumn=o,this.m_callback=n};(r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r)._registerLegacyNamespaceProp("ArrayCellSet",n),n.prototype.getData=function(t){var e=this,r=t.row,o=t.column,n={};return Object.defineProperty(n,"data",{enumerable:!0,get:function(){return e.m_callback._getCellData(r,o)},set:function(t){e.m_callback._setCellData(r,o,t)}}),n},n.prototype.getMetadata=function(t){return this.m_callback._getCellMetadata(t.row,t.column)},n.prototype.getStart=function(t){return"row"===t?this.m_startRow:"column"===t?this.m_startColumn:-1},n.prototype.getCount=function(t){return"row"===t?Math.max(0,this.m_endRow-this.m_startRow):"column"===t?Math.max(0,this.m_endColumn-this.m_startColumn):0},n.prototype.getExtent=function(t){return{row:{extent:1,more:{before:!1,after:!1}},column:{extent:1,more:{before:!1,after:!1}}}},n.prototype.getStartRow=function(){return this.m_startRow},n.prototype.getStartColumn=function(){return this.m_startColumn};
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
var s=function t(e,r){if(!(e instanceof Array)&&"function"!=typeof e&&"function"!=typeof e.subscribe){throw new Error("_ERR_DATA_INVALID_TYPE_SUMMARY\n_ERR_DATA_INVALID_TYPE_DETAIL")}this.rowHeaderKey=this._getRowHeaderFromOptions(r),null!=r&&(this.columns=r.columns,this.sortCriteria=r.initialSort),t.superclass.constructor.call(this,e)};r._registerLegacyNamespaceProp("ArrayDataGridDataSource",s),r.Object.createSubclass(s,r.DataGridDataSource,"oj.ArrayDataGridDataSource"),s.prototype.Init=function(){null==this.columns&&(this.columns=this._getColumnsForScaffolding(this.getDataArray())),this._initializeRowKeys(),"function"==typeof this.data&&this.data.subscribe(this._subscribe.bind(this),null,"arrayChange"),s.superclass.Init.call(this)},s.prototype.comparator=null,s.prototype.sortCriteria=null,s.prototype._getRowHeaderFromOptions=function(e){if(null!=e&&null!=e.rowHeader){var r=e.rowHeader;if("object"===t(r)){if(null!=r.default){if("none"===r.default)return;if("index"===r.default)return"m_defaultIndex"}}else if(null!=r)return r}return"m_defaultIndex"},s.prototype._initializeRowKeys=function(){var t;for(t=this.getDataArray(),this.lastKey=0;this.lastKey<t.length;this.lastKey+=1)t[this.lastKey].ojKey=this.lastKey.toString()},s.prototype._getColumnsForScaffolding=function(t){if("number"!=typeof t.length||0===t.length)return[];for(var e=[],r=Object.keys(t[0]),o=0;o<r.length;o++){var n=r[o];void 0!==this.rowHeaderKey&&n===this.rowHeaderKey||e.push(n)}return e},s.prototype.getCount=function(t){return"row"===t?this._size():"column"===t?this.columns.length:0},s.prototype.getCountPrecision=function(t){return"exact"},s.prototype._getHeaderData=function(t,e){return"row"===t?void 0===this.rowHeaderKey?null:"m_defaultIndex"===this.rowHeaderKey?this._getRowKeyByIndex(e):this.getDataArray()[e][this.rowHeaderKey]:"column"===t?this.columns[e]:void 0},s.prototype._getHeaderMetadata=function(t,e){var r;return"row"===t?{key:this._getRowKeyByIndex(e)}:"column"===t?(r=this._getHeaderData(t,e),null!=this.sortCriteria&&this.sortCriteria.key===r?{key:this._getHeaderData(t,e),sortDirection:this.sortCriteria.direction}:{key:r}):void 0},s.prototype.fetchHeaders=function(t,e,o){var n,s=t.axis,a=t.start,i=t.count;if(a=Math.max(0,a),"column"===s)this.columns.length||this._populateColumns(),n=Math.min(this.columns.length,a+i);else{var l=this.getDataArray();n=void 0===this.rowHeaderKey?a:Math.min(l.length,a+i)}var u=new r.ArrayHeaderSet(a,n,s,this);null!=e&&null!=e.success&&(null==o&&(o={}),e.success.call(o.success,u,t,null))},s.prototype._getCellData=function(t,e){var r=this.columns[e];return this.getDataArray()[t][r]},s.prototype._setCellData=function(t,e,r){this.getDataArray()[t][this.columns[e]]=r},s.prototype._getCellMetadata=function(t,e){return{keys:{row:this._getRowKeyByIndex(t),column:this.columns[e]}}},s.prototype.fetchCells=function(t,e,o){for(var n,s,a,i,l=0;l<t.length;l+=1){var u=t[l];"row"===u.axis?(n=u.start,s=Math.min(this._size(),n+u.count)):"column"===u.axis&&(this.columns.length||this._populateColumns(),a=u.start,i=Math.min(this.columns.length,a+u.count))}if(void 0!==s&&void 0!==i){var c=new r.ArrayCellSet(n,s,a,i,this);null!=e&&null!=e.success&&(null==o&&(o={}),e.success.call(o.success,c,t))}else null!=e&&null!=e.error&&(null==o&&(o={}),e.error.call(o.error))},s.prototype.keys=function(t){var e=t.row,r=t.column;return new Promise(function(t){t({row:this._getRowKeyByIndex(e),column:this.columns[r]})}.bind(this))},s.prototype.indexes=function(t){var e=t.row,r=t.column;return new Promise(function(t){t({row:this._getRowIndexByKey(e),column:this.columns.indexOf(r)})}.bind(this))},s.prototype.sort=function(t,e,r){var o=[],n=[];if(null!=e&&null==r&&(r={}),void 0===this.origData&&(this._origSortCriteria=this.sortCriteria,this.origData=this.data.slice()),null==t?t=this.sortCriteria:this.sortCriteria=t,null!=t){var s=t.axis,a=t.key;if("column"===s)this.getDataArray().sort(this._getComparator()),null!=e&&null!=e.success&&e.success.call(r.success);else if("row"===s){var i,l=this._getRowIndexByKey(a);for(i=0;i<this.columns.length;i+=1)o[i]=this.getDataArray()[l][this.columns[i]];for(o.sort(this._getComparator()),i=0;i<this.columns.length;i+=1)n[i]=this.columns[o.indexOf(this.getDataArray()[l][this.columns[i]])];this.origColumns=this.columns,this.columns=n,null!=e&&null!=e.success&&e.success.call(r.success)}else null!==e&&null!=e.error&&e.error.call(r.error,"Invalid axis value")}else this._resetSortOrder(e,r)},s.prototype._resetSortOrder=function(t,e){void 0!==this.origData&&(this.data=this.origData,this.sortCriteria=this._origSortCriteria),null!=this.origColumns&&(this.columns=this.origColumns),null!=t&&null!=t.success&&t.success.call(e.success)},s.prototype.getCapability=function(t){return"sort"===t?"column":"move"===t?"row":null},s.prototype._getComparator=function(){var t=this.comparator;if(null==t){var e=this.sortCriteria.key,r=this.sortCriteria.direction,o=this.sortCriteria.axis;return this._naturalSort(r,e,o)}return t},s.prototype._naturalSort=function(t,e,r){return"ascending"===t?function(t,o){var n,s,a=t,i=o;return null!=e&&"column"===r&&(a instanceof Array?(a=a[parseInt(e,10)],i=i[parseInt(e,10)]):(a=a[e],i=i[e])),n=isNaN(a),s=isNaN(i),a instanceof Date&&(a=a.toISOString(),n=!0),i instanceof Date&&(i=i.toISOString(),s=!0),n&&s?a<i?-1:a===i?0:1:n?1:s?-1:a-i}:"descending"===t?function(t,o){var n,s,a=t,i=o;return null!=e&&"column"===r&&(a instanceof Array?(a=a[parseInt(e,10)],i=i[parseInt(e,10)]):(a=a[e],i=i[e])),n=isNaN(a),s=isNaN(i),a instanceof Date&&(a=a.toISOString(),n=!0),i instanceof Date&&(i=i.toISOString(),s=!0),n&&s?a>i?-1:a===i?0:1:n?-1:s?1:i-a}:void 0},s.prototype.move=function(t,e,r,o,n){var s,a,i=this._getRowIndexByKey(t),l=this.data.splice(i,1)[0];this.data instanceof Array&&(a=this._getModelEvent("delete",t,null,i,-1,!0),this.handleEvent("change",a)),null===e?(this.data.push(l),s=this.data.length-1):(s=this._getRowIndexByKey(e),this.data.splice(s,0,l)),this.data instanceof Array&&(a=this._getModelEvent("insert",t,null,s,-1),this.handleEvent("change",a)),void 0!==this.origData&&(this.origData=this.data.slice())},s.prototype.moveOK=function(t,e,r){return"valid"},s.prototype.getDataArray=function(){return"function"==typeof this.data?this.data():this.data},s.prototype._getRowIndexByKey=function(t){for(var e=this.getDataArray(),r=0;r<e.length;r++)if(e[r].ojKey===t)return r;return-1},s.prototype._getRowKeyByIndex=function(t){var e=this.getDataArray();return e[t]?(e[t].ojKey||this._initializeRowKeys(),e[t].ojKey):null},s.prototype._getModelEvent=function(t,e,r,o,n,s){var a={};return a.source=this,a.operation=t,a.keys={row:e,column:r},a.indexes={row:o,column:n},a.silent=s,a},s.prototype._subscribe=function(t){var e,r,o,n=!1,s=!1;for(e=0;e<t.length;e++){if(void 0!==(r=t[e]).moved){s=!0,o=this._getModelEvent("refresh",null,null),this.handleEvent("change",o);break}"added"===r.status&&(n=!0)}if(!s){var a,i,l,u=[],c=[];for(e=0;e<t.length;e++)"deleted"===(r=t[e]).status&&(a=r.value,l=r.index,i=a.ojKey,u.push({row:i,column:-1}),c.push({row:l,column:-1}));for(u.length>0&&(o={source:this,operation:"delete",keys:u,indexes:c,silent:n},this.handleEvent("change",o)),e=0;e<t.length;e++)"added"===(r=t[e]).status&&(a=r.value,l=r.index,null==a.ojKey&&(a.ojKey=this.lastKey.toString(),this.lastKey+=1),i=a.ojKey,o=this._getModelEvent("insert",i,null,l,-1),this.handleEvent("change",o))}void 0!==this.origData&&(this.origData=this.data.slice())},s.prototype._size=function(){return this.getDataArray().length},s.prototype.getRowHeaderKey=function(){return this.rowHeaderKey},s.prototype.getColumns=function(){return this.columns},s.prototype.getData=function(){return this.data},s.prototype._populateColumns=function(){if(this.getDataArray().length)for(var t=this.getDataArray()[0].length,e=0;e<t;e++)this.columns.push(e.toString())};
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
var a=function(t,e,r,o){this.m_start=t,this.m_end=e,this.m_axis=r,this.m_callback=o};r._registerLegacyNamespaceProp("ArrayHeaderSet",a),a.prototype.getData=function(t,e){return null==this.m_callback?null:(r.Assert.assert(t<=this.m_end&&t>=this.m_start,"index out of bounds"),r.Assert.assert(null==e||0===e,"level out of bounds"),this.m_callback._getHeaderData(this.m_axis,t))},a.prototype.getMetadata=function(t,e){return null==this.m_callback?null:(r.Assert.assert(t<=this.m_end&&t>=this.m_start,"index out of bounds"),r.Assert.assert(null==e||0===e,"level out of bounds"),this.m_callback._getHeaderMetadata(this.m_axis,t))},a.prototype.getLevelCount=function(){return this.getCount()>0?1:0},a.prototype.getExtent=function(t,e){return r.Assert.assert(t<=this.m_end&&t>=this.m_start,"index out of bounds"),r.Assert.assert(null==e||0===e,"level out of bounds"),{extent:1,more:{before:!1,after:!1}}},a.prototype.getDepth=function(t,e){return r.Assert.assert(t<=this.m_end&&t>=this.m_start,"index out of bounds"),r.Assert.assert(null==e||0===e,"level out of bounds"),1},a.prototype.getLabel=function(){return null},a.prototype.getCount=function(){return null==this.m_callback?0:Math.max(0,this.m_end-this.m_start)},a.prototype.getStart=function(){return this.m_start};
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
var i={};i.ArrayDataGridDataSource=oj.ArrayDataGridDataSource,i.ArrayHeaderSet=oj.ArrayHeaderSet,i.ArrayCellSet=oj.ArrayCellSet,e.ArrayCellSet=n,e.ArrayDataGridDataSource=s,e.ArrayHeaderSet=a,e.default=i,Object.defineProperty(e,"__esModule",{value:!0})})}();
//# sourceMappingURL=ojarraydatagriddatasource.js.map