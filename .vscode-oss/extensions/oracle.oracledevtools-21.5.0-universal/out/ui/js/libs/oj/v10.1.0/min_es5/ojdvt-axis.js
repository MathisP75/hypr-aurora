/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define(["exports","ojs/ojdvt-toolkit"],function(t,i){"use strict";
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */var a=function(){};i.Obj.createSubclass(a,i.Obj),a.MINIMUM_AXIS_BUFFER=10,a.prototype.Init=function(t,a,n){this._context=t,this.Position=a.position,this._radius=a._radius,"top"==this.Position||"bottom"==this.Position?(this.StartCoord=n.x,this.EndCoord=n.x+n.w):"left"==this.Position||"right"==this.Position?(this.StartCoord=n.y,this.EndCoord=n.y+n.h):"radial"==this.Position?(this.StartCoord=0,this.EndCoord=this._radius):"tangential"==this.Position&&(i.Agent.isRightToLeft(t)?(this.StartCoord=2*Math.PI,this.EndCoord=0):(this.StartCoord=0,this.EndCoord=2*Math.PI)),this.MinValue=null,this.MaxValue=null,this.GlobalMin=null,this.GlobalMax=null,this.DataMin=null,this.DataMax=null,this.StartOverflow=0,this.EndOverflow=0,null==a.leftBuffer&&(a.leftBuffer=1/0),null==a.rightBuffer&&(a.rightBuffer=1/0),this.Options=a},a.prototype.getCtx=function(){return this._context},a.prototype.getOptions=function(){return this.Options},a.prototype.getValueAt=function(t){if(null==t)return null;var i=Math.min(this.StartCoord,this.EndCoord),a=Math.max(this.StartCoord,this.EndCoord);return t<i||t>a?null:this.getUnboundedValueAt(t)},a.prototype.getCoordAt=function(t){return null==t||t<this.MinValue||t>this.MaxValue?null:this.getUnboundedCoordAt(t)},a.prototype.getBoundedValueAt=function(t){if(null==t)return null;var i=Math.min(this.StartCoord,this.EndCoord),a=Math.max(this.StartCoord,this.EndCoord);return t<i?t=i:t>a&&(t=a),this.getUnboundedValueAt(t)},a.prototype.getBoundedCoordAt=function(t){return null==t?null:(t<this.MinValue?t=this.MinValue:t>=this.MaxValue&&(t=this.MaxValue),this.getUnboundedCoordAt(t))},a.prototype.getUnboundedValueAt=function(t){return null},a.prototype.getUnboundedCoordAt=function(t){return null};
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
var n=function(t,i,a,n,e,o,r){this.Init(t,i,a,n,e,o,r)};
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */i.Obj.createSubclass(n,i.Obj),n.SCALE_NONE="none",n.SCALE_AUTO="auto",n.SCALE_THOUSAND="thousand",n.SCALE_MILLION="million",n.SCALE_BILLION="billion",n.SCALE_TRILLION="trillion",n.SCALE_QUADRILLION="quadrillion",n.SCALING_FACTOR_DIFFERENCE=3,n.prototype.Init=function(t,i,a,n,e,o,r){this._context=t,this._translations=r,this._scales={},this._scalesOrder=[],this._factorToScaleMapping={},this.InitScales(),this.InitFormatter(i,a,n,e,o)},n.prototype.InitScales=function(){var t=function(t,i,a){var n;a&&(n=this._translations[a]);var e={scaleFactor:i,localizedSuffix:n};this._scales[t]=e,this._scalesOrder.push(e),this._factorToScaleMapping[i]=e},i=n.SCALING_FACTOR_DIFFERENCE;t.call(this,n.SCALE_NONE,0*i),t.call(this,n.SCALE_THOUSAND,1*i,"labelScalingSuffixThousand"),t.call(this,n.SCALE_MILLION,2*i,"labelScalingSuffixMillion"),t.call(this,n.SCALE_BILLION,3*i,"labelScalingSuffixBillion"),t.call(this,n.SCALE_TRILLION,4*i,"labelScalingSuffixTrillion"),t.call(this,n.SCALE_QUADRILLION,5*i,"labelScalingSuffixQuadrillion"),this._scalesOrder.sort(function(t,i){return t.scaleFactor<i.scaleFactor?-1:t.scaleFactor>i.scaleFactor?1:0})},n.prototype.InitFormatter=function(t,i,a,n,e){var o,r,s=!1,l=!1;if("off"!==e&&(l=!0),"number"!=typeof(r=this._getScaleFactor(n))&&(s=!0),s){var h=Math.max(Math.abs(t),Math.abs(i)),M=this._getPowerOfTen(h);r=this._findNearestLEScaleFactor(M)}if(!0===l)if(0==a&&t==i){var u=r-this._getPowerOfTen(i);o=u<=0?Math.max(u+3,0):Math.max(u,4)}else{var c=this._getPowerOfTen(a);o=Math.max(r-c,0)}this._useAutoPrecision=l,this._scaleFactor=r,this._decimalPlaces=o},n.prototype._findNearestLEScaleFactor=function(t){var i=0;if(t<=this._scalesOrder[0].scaleFactor)i=this._scalesOrder[0].scaleFactor;else if(t>=this._scalesOrder[this._scalesOrder.length-1].scaleFactor)i=this._scalesOrder[this._scalesOrder.length-1].scaleFactor;else for(var a=this._scalesOrder.length-1;a>=0;a--)if(this._scalesOrder[a].scaleFactor<=t){i=this._scalesOrder[a].scaleFactor;break}return i},n.prototype._getScaleFactor=function(t){t||(t=n.SCALE_AUTO);var i,a=this._scales[t];return a&&(i=a.scaleFactor),i},n.prototype.format=function(t,i){var a=null!=t?parseFloat(t):t;if("number"==typeof a){var n=Math.pow(10,this._scaleFactor),e={style:"decimal",decimalFormat:"unit"===(i&&i.getOptions&&i.getOptions()&&i.getOptions().style)?"standard":"short",nu:"latn",useGrouping:!1},o=this._context.getNumberConverter(e),r=o.format(n,e),s=/(\d+)(.*$)/.exec(r),l=s[2],h=Number(s[1])/n*a;if(i&&i.format)h=i.format(h);else{var M={style:"decimal",minimumFractionDigits:this._decimalPlaces,maximumFractionDigits:this._decimalPlaces};h=(o=this._context.getNumberConverter(M)).format(h,M)}return"string"==typeof l&&0!=t&&(h+=l),h}return t},n.prototype._formatFraction=function(t){var i=t.toString();if(-1!=i.indexOf("e"))return i;if(this._decimalPlaces>0){-1==i.indexOf(".")&&(i+=".");for(var a=i.substring(i.indexOf(".")+1).length;a<this._decimalPlaces;)i+="0",a++}return i},n.prototype._getPowerOfTen=function(t){var i=0;if((t=t>=0?t:-t)<1e-15)return 0;if(t==1/0)return Number.MAX_VALUE;if(t>=10)for(;t>=10;)i+=1,t/=10;else if(t<1)for(;t<1;)i-=1,t*=10;return i},t.BaseAxisInfo=a,t.DataAxisInfoMixin=function(t,n,e){this.MAX_NUMBER_OF_GRIDS_AUTO=10,this.MINOR_TICK_COUNT=2,this.MAJOR_TICK_INCREMENT_BUFFER=1e-10,this.MIN_BAR_SIZE_IN_LOG=10,this.MixinInit=function(t,n,e){"top"==this.Position||"bottom"==this.Position?("off"!=n.tickLabel.rendered&&"off"!=n.rendered&&(this.StartOverflow=Math.max(a.MINIMUM_AXIS_BUFFER-n.leftBuffer,0),this.EndOverflow=Math.max(a.MINIMUM_AXIS_BUFFER-n.rightBuffer,0)),i.Agent.isRightToLeft(t)?(this.MinCoord=this.EndCoord-this.EndOverflow,this.MaxCoord=this.StartCoord+this.StartOverflow):(this.MinCoord=this.StartCoord+this.StartOverflow,this.MaxCoord=this.EndCoord-this.EndOverflow)):"tangential"==this.Position||"radial"==this.Position?(this.MinCoord=this.StartCoord,this.MaxCoord=this.EndCoord):(this.MinCoord=this.EndCoord,this.MaxCoord=this.StartCoord),this.DataMin=n.dataMin,this.DataMax=n.dataMax,this.IsLog="log"==n.scale&&this.DataMin>0&&this.DataMax>0,this.LinearGlobalMin=this.actualToLinear(n.min),this.LinearGlobalMax=this.actualToLinear(n.max),this.LinearMinValue=null==n.viewportMin?this.LinearGlobalMin:this.actualToLinear(n.viewportMin),this.LinearMaxValue=null==n.viewportMax?this.LinearGlobalMax:this.actualToLinear(n.viewportMax),this._dataMin=this.actualToLinear(this.DataMin),this._dataMax=this.actualToLinear(this.DataMax),this.MajorIncrement=this.actualToLinear(n.step),this.MinorIncrement=this.actualToLinear(n.minorStep),this._minMajorIncrement=this.actualToLinear(n.minStep),this.MajorTickCount=n._majorTickCount,this.MinorTickCount=n._minorTickCount,this.LogScaleUnit=n._logScaleUnit,this.ZeroBaseline=!this.IsLog&&"zero"==n.baselineScaling,this.Converter=null,null!=n.tickLabel&&(this.Converter=n.tickLabel.converter),this._calcAxisExtents(),this.GlobalMin=this.linearToActual(this.LinearGlobalMin),this.GlobalMax=this.linearToActual(this.LinearGlobalMax),this.MinValue=this.linearToActual(this.LinearMinValue),this.MaxValue=this.linearToActual(this.LinearMaxValue)},this.getBaselineCoord=function(){return this.IsLog?this.MinCoord:this.getBoundedCoordAt(0)},this.getUnboundedValueAt=function(t){if(null==t)return null;var i=(t-this.MinCoord)/(this.MaxCoord-this.MinCoord),a=this.LinearMinValue+i*(this.LinearMaxValue-this.LinearMinValue);return this.linearToActual(a)},this.getUnboundedCoordAt=function(t){return this.GetUnboundedCoordAt(this.actualToLinear(t))},this.GetUnboundedCoordAt=function(t){if(null==t)return null;var i=this.LinearMaxValue==this.LinearMinValue?0:(t-this.LinearMinValue)/(this.LinearMaxValue-this.LinearMinValue);return i=Math.max(Math.min(1e3,i),-1e3),this.MinCoord+i*(this.MaxCoord-this.MinCoord)},this.CalcMajorMinorIncr=function(t){this.MajorIncrement||(this.MajorTickCount?this.MajorIncrement=(this.LinearMaxValue-this.LinearMinValue)/this.MajorTickCount:this.MajorIncrement=Math.max(t,this._minMajorIncrement)),this.MajorTickCount||(this.MajorTickCount=(this.LinearMaxValue-this.LinearMinValue)/this.MajorIncrement,Math.ceil(this.MajorTickCount)-this.MajorTickCount<this.MAJOR_TICK_INCREMENT_BUFFER&&(this.MajorTickCount=Math.ceil(this.MajorTickCount))),this.MinorTickCount||(this.MinorIncrement?this.MinorTickCount=this.MajorIncrement/this.MinorIncrement:this.IsLog?this.MinorTickCount=this.MajorIncrement:this.MinorTickCount=this.MINOR_TICK_COUNT),this.MinorIncrement||(this.MinorIncrement=this.MajorIncrement/this.MinorTickCount)},this._calcAxisExtents=function(){var t="on"==this.Options._continuousExtent;this.ZeroBaseline&&(this._dataMin=Math.min(0,this._dataMin),this._dataMax=Math.max(0,this._dataMax));var i=null!=this.LinearGlobalMax?this.LinearGlobalMax:this._dataMax,a=null!=this.LinearGlobalMin?this.LinearGlobalMin:this._dataMin,n=Math.max(this._calcAxisScale(a,i),this._minMajorIncrement);this._dataMin==this._dataMax&&(0==this._dataMin?this._dataMax+=5*n:(this._dataMin-=2*n,this._dataMax+=2*n)),null==this.LinearGlobalMin&&(this.ZeroBaseline&&this._dataMin>=0?this.LinearGlobalMin=0:t?this.LinearGlobalMin=this._dataMin-.1*(this._dataMax-this._dataMin):this.ZeroBaseline||null==this.LinearGlobalMax?this.LinearGlobalMin=(Math.ceil(this._dataMin/n)-1)*n:(this.LinearGlobalMin=this.LinearGlobalMax,this.LinearGlobalMin-=n*(Math.floor((this.LinearGlobalMin-this._dataMin)/n)+1)),this._dataMin>=0&&!this.IsLog&&(this.LinearGlobalMin=Math.max(this.LinearGlobalMin,0))),null==this.LinearGlobalMax&&(this.MajorTickCount?(this.LinearGlobalMax=this.LinearGlobalMin+this.MajorTickCount*n,this.LinearGlobalMax<this._dataMax&&(n=Math.max(this._calcAxisScale(a,i+n),this._minMajorIncrement),this.LinearGlobalMax=this.LinearGlobalMin+this.MajorTickCount*n)):this.ZeroBaseline&&this._dataMax<=0?this.LinearGlobalMax=0:t?this.LinearGlobalMax=this._dataMax+.1*(this._dataMax-this._dataMin):this.ZeroBaseline?this.LinearGlobalMax=(Math.floor(this._dataMax/n)+1)*n:(this.LinearGlobalMax=this.LinearGlobalMin,this.LinearGlobalMax+=n*(Math.floor((this._dataMax-this.LinearGlobalMax)/n)+1)),this._dataMax<=0&&(this.LinearGlobalMax=Math.min(this.LinearGlobalMax,0))),this.LinearGlobalMax==this.LinearGlobalMin&&(this.LinearGlobalMax=100,this.LinearGlobalMin=0,n=(this.LinearGlobalMax-this.LinearGlobalMin)/this.MAX_NUMBER_OF_GRIDS_AUTO),null==this.LinearMinValue&&(this.LinearMinValue=this.LinearGlobalMin),null==this.LinearMaxValue&&(this.LinearMaxValue=this.LinearGlobalMax);var e=Math.abs(this.GetUnboundedCoordAt(this.LinearGlobalMin)-this.GetUnboundedCoordAt(this._dataMin));this.IsLog&&e<this.MIN_BAR_SIZE_IN_LOG&&(this.LinearGlobalMin-=n,this.LinearMinValue=this.LinearGlobalMin),this.LinearMinValue==this.LinearGlobalMin&&this.LinearMaxValue==this.LinearGlobalMax||(n=this._calcAxisScale(this.LinearMinValue,this.LinearMaxValue)),this.LinearGlobalMin>this.LinearMinValue&&(this.LinearGlobalMin=this.LinearMinValue),this.LinearGlobalMax<this.LinearMaxValue&&(this.LinearGlobalMax=this.LinearMaxValue),this.CalcMajorMinorIncr(n)},this._calcAxisScale=function(t,a){if(this.MajorIncrement)return this.MajorIncrement;var n=a-t;if(this.IsLog){var e=Math.floor(n/8)+1;return(!this.LogScaleUnit||this.LogScaleUnit<e)&&(this.LogScaleUnit=e),this.LogScaleUnit}if(0==n)return 0==t?10:Math.pow(10,Math.floor(i.Math.log10(t))-1);if(this.MajorTickCount){var o=n/this.MajorTickCount,r=o/(l=Math.pow(10,Math.ceil(i.Math.log10(o)-1)));return(r=r>1&&r<=1.5?1.5:r>5?10:Math.ceil(r))*l}var s=i.Math.log10(n),l=Math.pow(10,Math.ceil(s)-2),h=Math.round(n/l);return(h>=10&&h<=14?2:h>=15&&h<=19?3:h>=20&&h<=24?4:h>=25&&h<=45?5:h>=46&&h<=80?10:20)*l},this.linearToActual=function(t){return null==t?null:this.IsLog?Math.pow(10,t):t},this.actualToLinear=function(t){return null==t?null:this.IsLog?t>0?i.Math.log10(t):null:t}},t.LinearScaleAxisValueFormatter=n,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ojdvt-axis.js.map