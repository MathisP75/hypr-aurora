!function(){function t(t,r){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,r){if(!t)return;if("string"==typeof t)return e(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(t,r)}(t))||r&&t&&"number"==typeof t.length){n&&(t=n);var i=0,s=function(){};return{s:s,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */define(["exports","ojs/ojeventtarget"],function(e,n){"use strict";
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
/**
   * @preserve Copyright 2013 jQuery Foundation and other contributors
   * Released under the MIT license.
   * http://jquery.org/license
   */var s=function(){function e(t,n){r(this,e),this.treeDataProvider=t,this.options=n,this.SuppressNodeTreeAsyncIterable=function(){return function t(e,n){var i=this;r(this,t),this._parent=e,this._asyncIterator=n,this[Symbol.asyncIterator]=function(){return new i._parent.SuppressNodeTreeAsyncIterator(i._parent,i._asyncIterator)}}}(),this.SuppressNodeTreeAsyncIterator=function(){function t(e,n){r(this,t),this._parent=e,this._baseIterator=n}return i(t,[{key:"_fetchNext",value:function(){return this._baseIterator.next()}},{key:"next",value:function(){var t=this._fetchNext(),e=this;return t.then(function(t){return e._parent._suppressNodeIfEmptyChildrenFirst(t)})}}]),t}(),this.AsyncIteratorYieldResult=function(){return function t(e,n){r(this,t),this._parent=e,this.value=n,this.value=n,this.done=!1}}(),this.AsyncIteratorReturnResult=function(){return function t(e,n){r(this,t),this._parent=e,this.value=n,this.value=n,this.done=!0}}(),this.FetchListResult=function(){return function t(n,i,s){r(this,t),this.fetchParameters=n,this.data=i,this.metadata=s,this[e._FETCHPARAMETERS]=n,this[e._DATA]=i,this[e._METADATA]=s}}(),this.FetchByOffsetResults=function(){return function t(n,i,s,a){r(this,t),this._parent=n,this.fetchParameters=i,this.results=s,this.done=a,this[e._FETCHPARAMETERS]=i,this[e._RESULTS]=s,this[e._DONE]=a}}(),this.Item=function(){return function t(n,i,s){r(this,t),this._parent=n,this.metadata=i,this.data=s,this[e._METADATA]=i,this[e._DATA]=s}}()}return i(e,[{key:"containsKeys",value:function(t){return this.treeDataProvider.containsKeys(t)}},{key:"getCapability",value:function(t){return this.treeDataProvider.getCapability(t)}},{key:"getTotalSize",value:function(){return this.treeDataProvider.getTotalSize()}},{key:"isEmpty",value:function(){return this.treeDataProvider.isEmpty()}},{key:"createOptimizedKeySet",value:function(t){return this.treeDataProvider.createOptimizedKeySet(t)}},{key:"createOptimizedKeyMap",value:function(t){return this.treeDataProvider.createOptimizedKeyMap(t)}},{key:"getChildDataProvider",value:function(t){var r=this.treeDataProvider.getChildDataProvider(t);return null==r?null:new e(r,this.options)}},{key:"fetchByOffset",value:function(t){var e=this;return this.treeDataProvider.fetchByOffset(t).then(function(t){return e._suppressNodeIfEmptyChildrenByOffset(t)})}},{key:"fetchByKeys",value:function(t){return this.treeDataProvider.fetchByKeys(t)}},{key:"fetchFirst",value:function(t){var e=this.treeDataProvider.fetchFirst(t);return new this.SuppressNodeTreeAsyncIterable(this,e[Symbol.asyncIterator]())}},{key:"_suppressNodeIfEmptyChildrenByOffset",value:function(e){var r=null;if(e.results&&this.options&&"ifEmptyChildren"==this.options.suppressNode){var n,i,s,a=[],o=t(e.results);try{for(o.s();!(s=o.n()).done;){var u=s.value;n=u.metadata,i=u.data;var h=this.treeDataProvider.getChildDataProvider(n.key,this.options);h&&"no"==h.isEmpty()&&a.push(new this.Item(this,n,i))}}catch(t){o.e(t)}finally{o.f()}a.length>0&&(r=new this.FetchByOffsetResults(this,e.fetchParameters,a,e.done))}return null==r?e:r}},{key:"_suppressNodeIfEmptyChildrenFirst",value:function(t){var e=null;if(!t.done&&this.options&&"ifEmptyChildren"==this.options.suppressNode&&t&&t.value&&t.value.data){for(var r=t.value.metadata,n=t.value.data,i=Array(),s=Array(),a=0;r&&a<r.length;a++){var o=this.treeDataProvider.getChildDataProvider(r[a].key,this.options);o&&"no"==o.isEmpty()&&(i.push(n[a]),s.push(r[a]))}i.length>0&&(e=t.done?new this.AsyncIteratorReturnResult(this,new this.FetchListResult(null,i,s)):new this.AsyncIteratorYieldResult(this,new this.FetchListResult(null,i,s)))}return Promise.resolve(null==e?t:e)}}]),e}();s._DATA="data",s._METADATA="metadata",s._FETCHPARAMETERS="fetchParameters",s._RESULTS="results",s._DONE="done",s._KEY="key",n.EventTargetMixin.applyMixin(s),e.SuppressNodeTreeDataProvider=s,Object.defineProperty(e,"__esModule",{value:!0})})}();
//# sourceMappingURL=ojsuppressnodetreedataprovider.js.map