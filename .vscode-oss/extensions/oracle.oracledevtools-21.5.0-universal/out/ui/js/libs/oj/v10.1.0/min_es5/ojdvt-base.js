!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */define(["ojs/ojcore-base","ojs/ojdvt-toolkit","ojs/ojcontext","ojs/ojconfig","ojs/ojmap","ojs/ojlocaledata","ojs/ojcomponentcore","jquery","ojs/ojkeysetimpl","ojs/ojdomutils","ojs/ojattributegrouphandler","ojs/ojlogger","ojs/ojcustomelement","ojs/ojcustomelement-utils","ojdnd"],function(t,r,i,o,s,a,l,h,c,d,u,p,_,f,m){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i,s=s&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s,h=h&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h,c=c&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c;
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
var v=function(e,t){this._path=t,this._root=e,this._delimiter="/"};v.prototype._resolveLeafObjectAndProperty=function(e,t,n,r){for(var i={};e&&t.indexOf(n)>-1;){var o=t.substring(0,t.indexOf(n));r&&void 0===e[o]&&(e[o]={}),e=e[o],t=t.substring(t.indexOf(n)+1,t.length)}return e&&(i.object=e,i.parameter=t),i},v.prototype._resolvePath=function(e){if(void 0===this._leaf){var t=this._resolveLeafObjectAndProperty(this._root,this._path,this._delimiter,e);this._leaf=t.object,this._param=t.parameter}},v.prototype.getValue=function(){return this._resolvePath(!1),void 0===this._leaf?void 0:this._leaf[this._param]},v.prototype.setValue=function(e,t){this._resolvePath(!0),!t&&this._leaf[this._param]||(this._leaf[this._param]=e)};
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
var y=function(e){this._styleCache={},this._context=e,this._letterSpacing=null,this._wordSpacing=null};y.styleTypes={TEXT:function(e){var t={};return e&&(e.hasClass("oj-gauge-metric-label")?(t["font-size"]=!0,t.color=!0):e.hasClass("oj-treemap-node-header")&&(t["font-weight"]=!0)),y._buildTextCssPropertiesObject(e,t)},BACKGROUND:function(e,t,n,r){return y._buildCssBackgroundPropertiesObject(e)},ANIM_DUR:function(e){var t=e.css("animation-duration");if(t)return"ms"===t.slice(-2)?t=parseInt(t.slice(0,-2),10):"s"===t.slice(-1)&&(t=1e3*parseFloat(t.slice(0,-1))),t}},y._INHERITED_FONT_COLOR="rgb(254, 0, 254)",y._INHERITED_FONT_FAMILY="Times",y._INHERITED_FONT_SIZE="1px",y._INHERITED_FONT_WEIGHT="1",y._INHERITED_FONT_STYLE="normal",y._FONT_SIZE_BUFFER=4,y.defaultStyleProcessor=function(e,t){return e.css(t)},y._buildCssBackgroundPropertiesObject=function(e){var t={};return e.css("border-top-color")&&(t.borderColor=e.css("border-top-color")),e.css("border-width")&&e.css("border-style")&&"none"!==e.css("border-style")&&(t.borderWidth=e.css("border-width")),e.css("background-color")&&(t.backgroundColor=e.css("background-color")),t},y._buildTextCssPropertiesObject=function(e,t){var n={},r=e.css("font-family");return r&&r!==y._INHERITED_FONT_FAMILY&&(n.fontFamily=r.replace(/"/g,"'")),!(r=e.css("font-size"))||r.indexOf("px")>-1&&parseFloat(r)<y._FONT_SIZE_BUFFER||t["font-size"]||(n.fontSize=r),(r=e.css("font-weight"))&&r!==y._INHERITED_FONT_WEIGHT&&!t["font-weight"]&&(n.fontWeight=r),(r=e.css("color"))&&r!==y._INHERITED_FONT_COLOR&&!t.color&&(n.color=r),(r=e.css("font-style"))&&r!==y._INHERITED_FONT_STYLE&&(n.fontStyle=r),n},y.prototype.processStyles=function(e,t,n,r){var i,o=null,s=null,a=e.data("no-style-cache"),l="";for(i=0;i<n.length;i++)l=l+n[i]+" ";var c,d={},u={},p=Object.keys(r);for(i=0;i<p.length;i++){var _=r[c=p[i]];_ instanceof Array||(_=[_]);var f=this._hasUncachedProperty(c,_)||a;s||o||!f||((o=h(document.createElement("div"))).css("display","none"),e.append(o),o.attr("class",l),(s=h(document.createElement("div"))).css("font-size",y._INHERITED_FONT_SIZE),s.css("color",y._INHERITED_FONT_COLOR),s.css("font-weight",y._INHERITED_FONT_WEIGHT),s.css("font-style",y._INHERITED_FONT_STYLE),o.append(s)),d[c]=_,f&&(u[c]=this._createStyleDivs(s,c,_))}if(!this._letterSpacing||!this._wordSpacing){var m=window.getComputedStyle(e[0]);this._context.letterSpacing=m.letterSpacing,this._context.wordSpacing=m.wordSpacing,this._letterSpacing=m.letterSpacing,this._wordSpacing=m.wordSpacing}for(i=0;i<p.length;i++)c=p[i],this._processStyle(u[c],t,c,d[c],a);o&&o.remove()},y.prototype._createStyleDivs=function(e,t,n){this._styleCache[t]||(this._styleCache[t]={});for(var r=null,i=0;i<n.length;i++){var o=n[i].property;if(o)void 0===this._styleCache[t][o]&&(r||("oj-dvt-color-ramp"===t?r=u.ColorAttributeGroupHandler.__createAttrDiv():(r=h(document.createElement("div"))).addClass(t),e.append(r)))}return r},y.prototype._processStyle=function(e,t,r,i,o){for(var s=0;s<i.length;s++){var a=i[s],l=a.property;if(l){var h=this._styleCache[r][l];if(void 0===h&&e&&(h="oj-dvt-color-ramp"===r?u.ColorAttributeGroupHandler.__processAttrDiv(e):y._resolveStyle(e,l),o||(this._styleCache[r][l]=h)),null!=h){var c=a.path,d=new v(t,c),p=d.getValue(),_="object"===n(p)&&!Array.isArray(p);if(_&&p)for(var f=Object.keys(h),m=0;m<f.length;m++){var g=f[m];void 0===p[g]&&(p[g]=h[g])}else d.setValue(h,_)}}}},y._resolveStyle=function(e,t){var n=y.styleTypes[t],r=n?n(e):y.defaultStyleProcessor(e,t);return null==r||"string"==typeof r&&""===r.replace(/^\s+/g,"")?null:r},y.prototype._hasUncachedProperty=function(e,t){var n=this._styleCache[e];if(!n)return!0;for(var r=0;r<t.length;r++){var i=t[r].property;if(i)if(void 0===n[i])return!0}return!1},y.populateOptions=function(e,t){for(var n,r=Object.keys(t),i=0;i<r.length;i++){var o=t[r[i]];o instanceof Array||(o=[o]);for(var s=0;s<o.length;s++){var a=(n=o[s]).path,l="TEXT"===n.property||"BACKGROUND"===n.property;if(l||a.indexOf("/")>-1)l||(a=a.substring(0,a.lastIndexOf("/"))),new v(e,a).setValue({})}}};
/**
   * @license
   * Copyright (c) 2018 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
var g=function(e,t){this._component=e,this._configMap=t,this._init()};t.Object.createSubclass(g,t.Object,"DataProviderHandler"),g.prototype._init=function(){this._dataProviderEventListeners={},this._keyDataMap={},this._fetchedData={},this._eventListeners=[]},g.prototype._fetchCollection=function(e,t,n,r,i,o){var s=this,a={data:[],keys:[]};if(o<=-1)return Promise.resolve(a);this._clientId=this._clientId||Symbol();var l={clientId:this._clientId,size:-1},h=e.fetchFirst(l)[Symbol.asyncIterator](),c=this.isTreeDataProvider(e);return h.next().then(function e(o){for(var l=[],d=0;d<o.value.data.length;d++){var u=t({data:o.value.data[d],key:o.value.metadata[d].key},i);l.push(u)}return Promise.all(l).then(function(e){for(var t=0;t<e.length;t++){var o=e[t].data,l=e[t].key;a.data.push(o),a.keys.push(l),s._keyDataMap[n].set(c?l.value:l,{data:o,key:l,parentKey:r,depth:i})}}).then(function(){return o.done?Promise.resolve(a):h.next().then(e)})})},g.prototype._getDPPostProcessor=function(e,t,n,r){var i=this,o=this.isTreeDataProvider(e);r=null==r?Number.MAX_VALUE:r;return o?function o(s,a){var l={value:s.data},h={value:s.key};if(a<r&&n&&n.has(h.value)){var c=e.getChildDataProvider(h.value);if(c)return i._fetchCollection(c,o,t,h.value,a+1).then(function(e){return l.children=e.data,h.children=e.keys,{data:l,key:h}})}return Promise.resolve({data:l,key:h})}:function(e){return Promise.resolve(e)}},g.prototype.fetchAllData=function(e,t,n){if(n&&this._fetchedData[t])return Promise.resolve(this._fetchedData[t]);var r=this._configMap[t];return this.clear(t,!0),this._fetchCollection(e,this._getDPPostProcessor(e,t,r.expandedKeySet,r.maxFetchDepth),t,null,0,r.maxFetchDepth).then(function(r){return n&&(this._fetchedData[t]=r,this._addDPEventListeners(e,t)),r}.bind(this))},g.prototype._getDataProviderEventHandler=function(t){var n=this,r=function(e,t,n){if(!t)return[];var r=new c(t),i=new Map;!function e(t){for(var o=0;o<t.length;o++){var s=n?t[o].value:t[o],a=r.get(s);a!==r.NOT_A_KEY&&i.set(a,o),n&&t[o].children&&e(t[o].children)}}(e.keys);var o=[];return t.forEach(function(e){o.push(i.get(e))}),o},i=function(e){var r=n._component._GetThrottlePromise();Promise.all([e,r]).then(function(e){n._fireEvent("clearState",{dataProperty:t}),n._fetchedData[t]=e[0],n._fireEvent("dataUpdated",{data:e[0]})})};return function(o){n._fireEvent("notReady",{event:o});var s=this,a=n.isTreeDataProvider(s),l=n._keyDataMap[t];if("refresh"===o.type)i(n.fetchAllData(s,t));else if("mutate"===o.type){var h=o.detail.update,d=o.detail.remove,u=o.detail.add,p=n._fetchedData[t];if(d){var _=d.keys;if(u){var f=new c(u.keys);_=new Set(e(_).filter(function(e){return!f.has(e)}))}n._fireEvent("removeKeys",{keys:_})}var m,v=function(e,r,i,o){var h=0,c=[],d=1===i&&!o;return r.keys.forEach(function(e){var i,u=o?null:r.data[h];if(a)if(d){var p=l.get(e);p&&(p.data.value=u,i=Promise.resolve({data:p.data,key:l.get(e).key}))}else{var _={value:u},f={value:e},m=s.getChildDataProvider(e);if(m&&!o)i=n.fetchAllData(m,t).then(function(e){return _.children=e.data,f.children=e.keys,{data:_,key:f}});else i=Promise.resolve({data:_,key:f});if(!o){var v=r.parentKeys?r.parentKeys[h]:null;l.set(f.value,{data:_,key:f,parentKey:v})}}else i=Promise.resolve({data:u,key:e}),l.set(e,{data:u,key:e});c.push(i),h+=1}),Promise.all(c).then(function(t){for(var n=0;n<t.length;n++){var r,s,h,c=a?t[n].key.value:t[n].key,u=l.get(c).parentKey;if(u){var _=l.get(u);_.data.children||d||(_.data.children=[],_.key.children=[]),r=_.data.children,s=_.key.children}else r=p.data,s=p.keys;if(o)h=e[n]-n,r.splice(h,i),s.splice(h,i);else{if(d)h=e[n];else h=0===e.length||null==e[n]?r.length:e[n];r.splice(h,i,t[n].data),s.splice(h,i,t[n].key)}}return p})},y=function(e){return s.fetchByKeys({keys:e}).then(function(t){var n=[];return t.results.size>0&&e.forEach(function(e){n.push(t.results.get(e).data)}),n})},g=Promise.resolve();h&&(m=h.indexes||r(p,h.keys,a),g=Array.isArray(h.data)?v(m,h,1):y(h.keys).then(function(e){var t=Object.create(h,{data:{value:e}});return v(m,t,1)})),g.then(function(){return d?(m=d.indexes||r(p,d.keys,a),v(m,d,1,!0)):Promise.resolve()}).then(function(){return u?(m=u.indexes||r(p,u.addBeforeKeys?u.addBeforeKeys:u.afterKeys,a),Array.isArray(u.data)?v(m,u,0):y(u.keys).then(function(e){var t=Object.create(u,{data:{value:e}});return v(m,t,0)})):Promise.resolve()}).then(function(){i(Promise.resolve(p))})}}},g.prototype._addDPEventListeners=function(e,t){if(!this._dataProviderEventListeners[t]){var n=this._getDataProviderEventHandler(t);e.addEventListener("mutate",n),e.addEventListener("refresh",n),this._dataProviderEventListeners[t]={dataProvider:e,listener:n}}},g.prototype.release=function(e){var t=function(e){var t=this._dataProviderEventListeners[e];if(t){var n=t.dataProvider,r=t.listener;n.removeEventListener("mutate",r),n.removeEventListener("refresh",r),this._dataProviderEventListeners[e]=null}}.bind(this);if(e)t(e),this.clear(e);else{for(var n=Object.keys(this._dataProviderEventListeners),r=0;r<n.length;r++)t(n[r]);this.clear()}},g.prototype.fetchChildrenData=function(e,t,n,r){var i=function(t,n,r){this._keyDataMap[e].get(t).data.children=n,this._keyDataMap[e].get(t).key.children=r}.bind(this),o=t.getChildDataProvider(n);if(o){var s=this._configMap[e].maxFetchDepth,a=this._keyDataMap[e].get(n).depth,l=this._getDPPostProcessor(t,e,r,s);return this._fetchCollection(o,l,e,n,a,s).then(function(e){return i(n,e.data,e.keys),e})}return Promise.resolve({data:[],keys:[]})},g.prototype.clear=function(e,t){e&&t?(this._keyDataMap[e]=this._keyDataMap[e]||new s,this._fireEvent("reset",{dataProperty:e})):e?this._fetchedData[e]=null:(this._fetchedData={},this._keyDataMap={})},g.prototype.isDataProvider=function(e){return t.DataProviderFeatureChecker.isDataProvider(e)},g.prototype.isTreeDataProvider=function(e){return t.DataProviderFeatureChecker.isTreeDataProvider(e)},g.prototype.addEventListener=function(e){this._eventListeners.push(e)},g.prototype._fireEvent=function(e,t){for(var n=0;n<this._eventListeners.length;n++)this._eventListeners[n]({type:e,detail:t})};
/**
   * @license
   * Copyright (c) 2018 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
var C=function(e,t,n){this._component=e,this._configMap=t,this._useObjectAssign=n,this._init()};t.Object.createSubclass(C,t.Object,"TemplateHandler"),C.prototype._init=function(){this._templateEnginePromise=null,this._templates=this.getTemplates(),this._templateResults={},this._templateNodeData={},this._componentResults={},this._eventListeners=[],this._queueNextEvent=!0,this._eventUpdates=[],this._templatePropertyMap={},this._propertyValidatorMap={}},C.prototype.getTemplateEngine=function(){return this._templateEnginePromise||(this._templateEnginePromise=new Promise(function(e){o.__getTemplateEngine().then(function(t){e(t)},function(e){throw new Error("Error loading template engine: "+e)})})),this._templateEnginePromise},C.prototype.getDataSet=function(e){var t=this.getTemplate(e);return t&&t.dataset},C.prototype.getTemplate=function(e){return this._templates[e]&&this._templates[e][0]},C.prototype.getDataSetBoolean=function(e,t){var n=this.getDataSet(e),r=f.AttributeUtils.attributeToPropertyName(t),i=n&&n[r];return null!=i&&f.AttributeUtils.coerceBooleanValue(this.getTemplate(e),t,i,"Boolean")},C.prototype.getTemplates=function(){return f.CustomElementUtils.getSlotMap(this._component.element[0])},C.prototype._getPropertyValidator=function(e,n){if(!e)return null;var r=this._propertyValidatorMap[n];if(r)return r;var i=t.CustomElementBridge.getMetadata(n),o=e.content?e.content.children[0]:e.childNodes[1],s={};return r=function(e,n){var r=e.join("."),a=s[r];if(!a){a=i;for(var l=0;l<e.length;l++)a=a.properties[e[l]];s[r]=a}t.BaseCustomElementBridge.checkEnumValues(o,r,n,a),null!=n&&t.BaseCustomElementBridge.checkType(o,r,n,a)},this._propertyValidatorMap[n]=r,r},C.prototype._processAliasedPropertyNames=function(e,t,n){var r=this._configMap[e].getAliasedPropertyNames;if(r)for(var i=r(t),o=Object.keys(i),s=0;s<o.length;s++){var a=o[s];n[i[a]]=n[a],n[a]=void 0}return n},C.prototype._getTemplateElementProperties=function(e){var t=this._templatePropertyMap[e];return t||(t=this._component.getElementPropertyNames(e),this._templatePropertyMap[e]=t),t},C.prototype.processNodeTemplate=function(e,n,r,i,o,a,l){var h=r.getAttribute("slot"),c=this._component.options.as,d=this._component.element[0],u=this._getTemplateElementProperties(i),p=this._getPropertyValidator(r,i),_=l?e:h,f=function(n){return function(r){var o=this._processAliasedPropertyNames(e,i,r),s=this._templateNodeData[_];t.CollectionUtils.copyInto(s.get(n).data,o),this._eventUpdates.push({key:a,data:o}),this._queueNextEvent&&(this._fireEvent("notReady"),this._component._GetThrottlePromise().then(function(){this._fireEvent("dataUpdated",{dataProperty:e,templateName:h,data:this._eventUpdates.slice(0)}),this._queueNextEvent=!0,this._eventUpdates=[]}.bind(this))),this._queueNextEvent=!1}.bind(this)}.bind(this),m=n.resolveProperties(d,r,i,u,o,c,p);m.subscribe(f(a));var v={data:this._processAliasedPropertyNames(e,i,m.peek()),node:m,context:o};return this._templateNodeData[_]||(this._templateNodeData[_]=new s),this._templateNodeData[_].set(a,v),v.data},C.prototype.processTemplates=function(e,t,n,r,i,o,s){if(o&&this._templateResults[e])return this._templateResults[e];var a,l,h=this._configMap[e],c=this;if(h){a=[],l=[];var d="string"==typeof h.templateName?function(){return h.templateName}:h.templateName,u="string"==typeof h.templateElementName?function(){return h.templateElementName}:h.templateElementName,_=h.resultPath,f=this._component.element[0],m=h.processChildrenData,v=h.processOptionData||function(e){return e},y=c._templateNodeData[e];if(d&&u&&_){var g,C=function(t,r,i,o,s){var a;try{o?a=c.processNodeTemplate(e,n,o,s,i,r,!0):(c._useObjectAssign?(a=Object.assign({},t),Object.defineProperties(a,{_noTemplate:{value:!0,enumerable:!1},_dvtNoClone:{value:!0,enumerable:!1}})):((a=Object.create(t))._noTemplate=!0,a._dvtNoClone=!0),y.set(r,{data:a,context:i})),a.id=r,a._itemData=t}catch(e){p.error(e)}return a};a.push(_),i&&y.has(i)&&(g=y.get(i).context.parentData.concat(y.get(i).context.data));var D=function e(t,n,i){for(var o=t.data,s=t.keys,a=[],l=0;l<o.length;l++){var h=r?o[l].value:o[l],p=r?s[l].value:s[l],v={data:h,key:p,index:l,componentElement:f};r&&(v.parentData=n,v.parentKey=i);var y=d(o[l]),g=u(o[l]),D=c.getTemplate(y),P=C(h,p,v,D,g);if(r&&o[l].children){var b=n.slice(0);b.push(h);var E=e({data:o[l].children,keys:s[l].children},b,p);m?m(P,o[l],E):P[_]=E}a.push(P)}return a}(t,g||[],i);l.push(v(D))}s&&(y.get(i).data[_]=l[0])}var P={paths:a,values:l};return o&&(this._templateResults[e]=P),P},C.prototype.release=function(e){var t;if(e){var n=this._configMap[e].derivedTemplates;t=n?[e].concat(n):[e]}else t=Object.keys(this._templateNodeData);for(var r=0;r<t.length;r++){var i=this._templateNodeData[t[r]];i&&(i.forEach(function(e){e.node&&e.node.dispose()}),this._templateNodeData[t[r]]=new s)}this.clear(e)},C.prototype.clear=function(e,t){if(e)for(var n,r=this._configMap[e].derivedTemplates,i=r?[e].concat(r):[e],o=0;o<i.length;o++)n=i[o],t?this._templateNodeData[n]=this._templateNodeData[n]||new s:(this._templateResults[n]=null,this._componentResults[n]=null);else this._templateResults={},this._componentResults={},this._templateNodeData={}},C.prototype.getComponentResults=function(e){return this._componentResults[e]},C.prototype.setComponentResults=function(e,t){this._componentResults[e]=t},C.prototype.addEventListener=function(e){this._eventListeners.push(e)},C.prototype._fireEvent=function(e,t){for(var n=0;n<this._eventListeners.length;n++)this._eventListeners[n]({type:e,detail:t})},
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
t.__registerWidget("oj.dvtBaseComponent",h.oj.baseComponent,{options:{trackResize:"on"},_ComponentCreate:function(){this._super(),this._renderCount=0,this._numDeferredObjs=0,this._optionsCopy=null,this._dataValuePromise={},this._templateMap={},this._TemplateHandler=new C(this,this._GetSimpleDataProviderConfigs(),this._UseObjectAssignForShapedData()),this._DataProviderHandler=new g(this,this._GetSimpleDataProviderConfigs()),this._DataProviderHandler.addEventListener(this._GetDPEventHandler()),this._TemplateHandler.addEventListener(this._GetDPEventHandler());for(var e=this._GetComponentStyleClasses(),n=0;n<e.length;n++)this.element.addClass(e[n]);this._referenceDiv=h(document.createElement("div")),this._referenceDiv.css("visibility","hidden"),this.element.append(this._referenceDiv),r.Agent.setAgentInfo(t.AgentUtils.getAgentInfo());var i=this.element[0].parentElement;i&&i._dvtcontext?this._context=i._dvtcontext:this._context=new r.Context(this.element[0],null,this._referenceDiv[0]);var o=Object.keys(this._GetSimpleDataProviderConfigs()),d={oj:t,KeySetImpl:c,ojMap:s,LocaleData:a,dataProviderProps:o};if(this._context.setJetProperties(d),this._context.setReadingDirection(this._GetReadingDirection()),this._context.setTooltipAttachedCallback(l.subtreeAttached),this._context.setOverlayAttachedCallback(l.subtreeAttached),this._context.setFixContextCallback(this._FixRendererContext.bind(this)),this._context.setCustomElement(this._IsCustomElement()),h(document.body).hasClass("oj-hicontrast")&&r.Agent.setHighContrast(!0),this._component=this._CreateDvtComponent(this._context,this._HandleEvent,this),r.Agent.isEnvironmentTest()){var u=this.element[0].getAttribute("data-oj-dvt-test-id");u&&u.length>0&&this._component.setId(u)}this._context.getStage().addChild(this._component),this._LoadResources(),this.options._widgetConstructor=l.__GetWidgetConstructor(this.element)},_AfterCreate:function(){this._super(),"off"!==this.options.trackResize&&this._addResizeListener(),this._ProcessOptions(),this._Render()},_SetLocaleHelpers:function(e,t){if(!1!==r.requireJS){var n={createNumberConverter:function(t){return new e.IntlNumberConverter(t)},isoToDateConverter:function(e){if("string"==typeof e){var n=t.IntlConverterUtils.isoToDate(e),r=n.toJSON()?t.IntlConverterUtils.dateToLocalIso(n):e;return t.IntlConverterUtils.isoToLocalDate(r)}return e},dateToIsoWithTimeZoneConverter:function(e){if(e instanceof Date){var n=-1*e.getTimezoneOffset(),r=n>=0?"+":"-",i=Math.floor(Math.abs(n)/60),o=Math.abs(n)%60,s=r+(2!==i.toString().length?"0"+i:i)+":"+(2!==o.toString().length?o+"0":o);return t.IntlConverterUtils.dateToLocalIso(e)+s}return e}};this._context.setLocaleHelpers(n)}},refresh:function(){this._super(),this._styleProcessor=null,this._context.setReadingDirection(this._GetReadingDirection()),this._Render()},getNodeBySubId:function(e){var t=this._component&&this._component.getAutomation?this._component.getAutomation():null;if(t){var n=this._ConvertLocatorToSubId(e);return t.getDomElementForSubId(n)}return null},getSubIdByNode:function(e){var t=this._component&&this._component.getAutomation?this._component.getAutomation():null;if(t){var n=t.getSubIdForDomElement(e);return n?this._ConvertSubIdToLocator(n):null}return null},_ConvertLocatorToSubId:function(e){return null},_ConvertSubIdToLocator:function(e){return null},_ProcessStyles:function(e){this._styleProcessor=this._styleProcessor?this._styleProcessor:new y(this._component.getCtx()),this._styleProcessor.processStyles(this.element,e,this._GetComponentStyleClasses(),this._GetChildStyleClasses())},_GetComponentStyleClasses:function(){return["oj-dvtbase"]},_GetChildStyleClasses:function(){var e={"oj-dvt-no-data-message":{path:"_statusMessageStyle",property:"TEXT"}};return e},_GetEventTypes:function(){return[]},_VerifyConnectedForSetup:function(){return!0},_ReleaseResources:function(){this._super(),this._renderNeeded=!0,this._context.hideTooltips(),this._context.releaseTooltipResources(),this._removeResizeListener(),this._CleanAllTemplates(),this._MakeReady(),this._DataProviderHandler.release(),this._TemplateHandler.release(),this._dataValuePromise={}},_destroy:function(){var e=this.element[0].parentElement;e&&e._dvtcontext&&(e._dvtcontext=null),this._component.destroy&&this._component.destroy(),this._component=null,this.element.children().remove(),this.element.removeAttr("role").removeAttr("tabIndex").removeAttr("aria-activedescendant");for(var t=this._GetComponentStyleClasses(),n=0;n<t.length;n++)this.element.removeClass(t[n]);this._super(),this._context.destroy(),this._context=null},_setOptions:function(e,t){this._superApply(arguments),this._OptionChangeHandler(e);var n=this.options.trackResize;if("off"===n&&this._resizeListener?this._removeResizeListener():"off"===n||this._resizeListener||this._addResizeListener(),this._ProcessOptions(),!this._bUserDrivenChange){var r=!1,i=this._GetEventTypes(),o=["highlightedCategories","selection","dataCursorPosition","scrollPosition"];h.each(e,function(e){if(i.indexOf(e)<0&&o.indexOf(e)<0)return r=!0,!1}),r?this._Render():(void 0!==e.highlightedCategories&&this._component.highlight(e.highlightedCategories),void 0!==e.selection&&this._component.select(e.selection),void 0!==e.dataCursorPosition&&this._component.positionDataCursor&&this._component.positionDataCursor(e.dataCursorPosition),void 0!==e.scrollPosition&&this._component.scroll(e.scrollPosition))}},_CreateDvtComponent:function(e,t,n){return null},_HandleEvent:function(e){var t=e.type;"selection"===t?this._UserOptionChange("selection",e.selection):"categoryHide"===t||"categoryShow"===t?this._UserOptionChange("hiddenCategories",e.hiddenCategories):"categoryHighlight"===t?this._UserOptionChange("highlightedCategories",e.categories):"optionChange"===t?this._UserOptionChange(e.key,e.value,e.optionMetadata):"touchHoldRelease"===t&&this._GetContextMenu()?this._OpenContextMenu(h.Event(e.nativeEvent),"touch"):"dvtRender"===t?this._Render():"ready"===t&&0===this._numDeferredObjs&&this._MakeReady()},_addResizeListener:function(){this._resizeListener||(this._resizeListener=this._handleResize.bind(this),d.addResizeListener(this.element[0],this._resizeListener,250))},_removeResizeListener:function(){this._resizeListener&&(d.removeResizeListener(this.element[0],this._resizeListener),this._resizeListener=null)},_handleResize:function(e,t){var n=this.element.width(),r=this.element.height();(null==this._width||null==this._height||Math.abs(n-this._width)+Math.abs(r-this._height)>=5)&&this._Render(!0)},_LoadResources:function(){},_Render:function(e){this._context.hideTooltips(),this._NotReady(),!this._context.isReadyToRender()||this._renderNeeded&&e?(this._renderNeeded=!0,this._MakeReady()):(this._width=this._IsFlowingLayoutSupported()?null:this.element.width(),this._height=this._IsFlowingLayoutSupported()?null:this.element.height(),this._context.setDefaultFontFamily(this._referenceDiv.css("font-family")),this._context.setDefaultFontSize(this._referenceDiv.css("font-size")),this.options._width=this._width,this.options._height=this._height,this.options._locale=r.Agent.isEnvironmentTest()&&this.options._locale?this.options._locale:o.getLocale(),this._IsDraggable()&&this.element.attr("draggable",!0),y.populateOptions(this.options,this._GetChildStyleClasses()),e?0===this._numDeferredObjs&&(this._renderCount+=1,this._RenderComponent(this._optionsCopy,e)):(this._renderCount+=1,this._resolveDeferredDataItems()&&this._RenderComponent(this._optionsCopy)),this._renderNeeded=!1)},_IsDraggable:function(){return!!this.options.dnd},_NotifyShown:function(){this._super(),this._notifyShownAttached()},_NotifyAttached:function(){this._super(),this._notifyShownAttached()},_NotifyDetached:function(){this._super(),this._notifyHiddenDetached()},_NotifyHidden:function(){this._super(),this._notifyHiddenDetached()},_notifyShownAttached:function(){this._renderNeeded&&this._Render()},_notifyHiddenDetached:function(){this._context.hideTooltips(),this._MakeReady()},_UserOptionChange:function(e,t,n){this._bUserDrivenChange=!0,this.option(e,t,{_context:{writeback:!0,optionMetadata:n,internalSet:!0,skipEvent:"_"===e.charAt(0)}}),this._bUserDrivenChange=!1},_NotifyContextMenuGesture:function(e,t,n){if("touch"!==n)if("keyboard"===n){var r=this.element[0].getBoundingClientRect(),i=this._component.getKeyboardFocus()?this._component.getKeyboardFocus().getBoundingClientRect():null,o=i?"left+"+(i.left+.5*i.width-r.left)+" top+"+(i.top+.5*i.height-r.top):"center";this._OpenContextMenu(t,n,{position:{at:o}})}else this._super(e,t,n)},_GetDvtComponent:function(e){var t=l.__GetWidgetConstructor(e)("instance");return t?t._component:null},_GetStringFromIndexPath:function(e){for(var t="",n=0;n<e.length;n++)t+="["+e[n]+"]";return t},_GetIndexPath:function(e){for(var t=[],n=0;e.indexOf("[",n)>0;){var r=e.indexOf("[",n)+1,i=e.indexOf("]",n);t.push(Number(e.substring(r,i))),n=i+1}return t},_GetFirstIndex:function(e){return Number(this._GetFirstBracketedString(e))},_GetFirstBracketedString:function(e){var t=e.indexOf("[")+1,n=e.indexOf("]");return e.substring(t,n)},_GetComponentDeferredDataPaths:function(){return{}},_GetComponentNoClonePaths:function(){if(!this._noClonePaths){this._noClonePaths={};var e=this,t=this._GetComponentDeferredDataPaths().root;t&&t.forEach(function(t){e._noClonePaths[t]=!0})}return this._noClonePaths},_resolveDocumentFonts:function(){var e=document.fonts;if(e&&"loading"===e.status){this._numDeferredObjs+=1;var t=this._renderCount;e.ready.then(function(){this._renderDeferredData(t,null,[])}.bind(this))}},_resolveDeferredDataItems:function(){this._optionsCopy=r.JsonUtils.clone(this.options,null,this._GetComponentNoClonePaths()),this._ProcessStyles(this._optionsCopy),this._numDeferredObjs=0,this._FixCustomRenderers(this._optionsCopy),this._resolveDocumentFonts();for(var e=this,t=this._GetComponentDeferredDataPaths(),n=Object.keys(t),i=0;i<n.length;i++){var o=n[i];t[o].forEach(function(t){if("root"===o)e._resolveDeferredDataItem.bind(e)(e.options,e._optionsCopy,t);else{var n=e.options[o];if(n&&n instanceof Array)for(var r=0;r<n.length;r++)e._resolveDeferredDataItem.bind(e)(n[r],e._optionsCopy[o][r],t)}})}return 0===this._numDeferredObjs},_resolveDeferredDataItem:function(e,t,n){var r=new v(e,n),i=r.getValue(),o=this;if(i instanceof Function?i=Promise.resolve(i(this._GetDataContext(e))):this._IsCustomElement()&&Array.isArray(i)&&(i=Promise.resolve(i),r.setValue(i,!0)),i&&this._DataProviderHandler.isDataProvider(i)){var s=this._DataProviderHandler.isTreeDataProvider(i);i=o._dataValuePromise[n]||new Promise(function(e){var t=o._TemplateHandler.getTemplateEngine(),r=o._DataProviderHandler.fetchAllData(i,n,!0);Promise.all([t,r]).then(function(t){if(i===o._dataValuePromise[n]){var r=t[0],a=t[1],l=o._ProcessTemplates(n,a,r,s,null,!0);o._dataValuePromise[n]=null,e(l)}},function(){o._dataValuePromise[n]=null})}),o._dataValuePromise[n]=i}if(i instanceof Promise){var a=this._renderCount;i.then(function(e){var r=[n],i=[e];e.paths&&(r=e.paths,i=e.values),o._renderDeferredData(a,t,r,i)},function(){o._renderDeferredData(a,t,[n],[[]])}),this._numDeferredObjs+=1}},_renderDeferredData:function(e,t,n,r){if(this._context&&e===this._renderCount){this._numDeferredObjs-=1;for(var i=0;i<n.length;i++)new v(t,n[i]).setValue(r[i],!0);0===this._numDeferredObjs&&(this._RenderComponent(this._optionsCopy),this._optionsCopy=null)}},_ClearDataProviderState:function(e){this._DataProviderHandler.clear(e),this._TemplateHandler.release(e),this._dataValuePromise[e]=null},_OptionChangeHandler:function(e){for(var t=Object.keys(this._GetSimpleDataProviderConfigs()),n=0;n<t.length;n++){var r=t[n];Object.prototype.hasOwnProperty.call(e,r)&&this._ClearDataProviderState(r)}},getElementPropertyNames:function(e){var n=t.CustomElementBridge.getMetadata(e).properties,r=Object.keys(n).filter(function(e){return!n[e]._eventListener}),i=new Set;return r.forEach(function(e){i.add(e)}),i},_ProcessTemplates:function(e,t,n,r,i,o,s){return this._TemplateHandler.processTemplates(e,t,n,r,i,o,s)},_GetSimpleDataProviderConfigs:function(){return{}},_UseObjectAssignForShapedData:function(){return!1},_GetDPEventHandler:function(){return function(e){"notReady"===e.type?this._NotReady():"dataUpdated"===e.type?this._Render():"clearState"===e.type?this._ClearDataProviderState(e.detail.dataProperty):"reset"===e.type?this._TemplateHandler.clear(e.detail.dataProperty,!0):"removeKeys"===e.type&&this._RemoveKeys(e.detail.keys)}.bind(this)},_RemoveKeys:function(e){var t,n,r=this.options.selection,i=new c(e);if(r&&r.length>0){for(var o=(n=r.slice(0)).length-1;o>=0;o--)i.has(n[o])&&(t=!0,n.splice(o,1));t&&this._UserOptionChange("selection",n)}},_getFetchDataHandler:function(e){var t=this._GetSimpleDataProviderConfigs()[e].resultPath;return function(n,r,i,o){var s=this._DataProviderHandler.fetchChildrenData(e,n,o,r),a=this._TemplateHandler.getTemplateEngine();return Promise.all([s,a]).then(function(n){var r=this._ProcessTemplates(e,{data:n[0].data,keys:n[0].keys},n[1],!0,o,!1,!0).values[0];i&&(i[t]=r)}.bind(this))}.bind(this)},_RenderComponent:function(e,t){if(this._context.isReadyToRender()){this._CleanAllTemplates();var n=this._IsFlowingLayoutSupported()&&this._resizeListener;n&&this._removeResizeListener(),this._component.render(t?null:e,this._width,this._height),n&&this._addResizeListener(),this.element.attr("role")?this.element[0].hasAttribute("tabindex")||this.element.attr("tabindex",0):this.element.attr("tabindex",null)}else this._renderNeeded=!0,this._MakeReady()},_GetDataContext:function(e){return{}},_IsFlowingLayoutSupported:function(){return!1},whenReady:function(){if(this._ready)return Promise.resolve(!0);if(!this._promise){var e=this;this._promise=new Promise(function(t){e._promiseResolve=t})}return this._promise},_NotReady:function(){if(this._ready=!1,0===this._numDeferredObjs&&!this._readyResolveFunc){var e=i.getContext(this.element[0]).getBusyContext(),t={description:"The component identified by '"+this.element.attr("id")+"' is being loaded."};this._readyResolveFunc=e.addBusyState(t)}},_MakeReady:function(){this._promiseResolve&&(this._promiseResolve(!0),this._promiseResolve=null),this._ready=!0,this._promise=null,this._readyResolveFunc&&(this._readyResolveFunc(),this._readyResolveFunc=null)},_ProcessOptions:function(){r.Agent.isEnvironmentTest()&&(this.options=Object.assign(this.options,this.element[0].__dvtToolkit));var e=this.options.tooltip;e&&e._renderer&&(this.options.tooltip={renderer:this._GetTemplateRenderer(e._renderer,"tooltip")})},_WrapCustomElementRenderer:function(e){var t=this;return e?function(n){n._dvtcontext=t._context;var r=e(n);if(n._templateName&&n._templateCleanup&&t._AddTemplate(n._templateName,n._templateCleanup),r&&!0!==r.preventDefault&&r.insert){var i=r.insert;return i.classList&&i.classList.contains("oj-dvtbase")?t._GetDvtComponent(i):i}return null}:null},_FixCustomRenderers:function(e){if(this._IsCustomElement())for(var t=this._GetComponentRendererOptions(),n=0;n<t.length;n++){var r=t[n].path,i=t[n].slot,o=this._TemplateHandler.getTemplates();if(i&&o[i]&&o[i][0])this._ProcessInlineTemplateRenderer(e,r,o[i][0],i);else{var s=new v(e,r),a=s.getValue();a&&s.setValue(this._WrapCustomElementRenderer(a),!0)}}},_GetComponentRendererOptions:function(){return[{path:"tooltip/renderer",slot:"tooltipTemplate"}]},_GetTemplateRenderer:function(e,t){var n=this;return function(r){var i=document.createElement("div");i.style.display="none",e({parentElement:i,context:r});var o=i.children[0];return o?(n._AddTemplate(t,function(){h(i).remove()}),i.removeChild(o),h(i).remove(),o):null}},_GetTemplateDataRenderer:function(e,t){var n=this;return function(r){var i=document.createElement("div");i.style.display="none",i._dvtcontext=n._context,n.element.append(i),e({parentElement:i,data:r.data});var o=i.children[0];return o?(n._AddTemplate(t,function(){h(i).remove()}),"http://www.w3.org/2000/svg"===o.namespaceURI?(i.removeChild(o),h(i).remove(),o):n._GetDvtComponent(o)):null}},_WrapInlineTemplateRenderer:function(e,t,n){return e},_ProcessInlineTemplateRenderer:function(e,t,n,r){var i=this._renderCount;this._numDeferredObjs+=1,this._TemplateHandler.getTemplateEngine().then(function(o){var s=function(e){var t=o.execute(this.element[0],n,e);return t&&t.length>0?(Object.defineProperty(e,"_templateCleanup",{value:function(){t.forEach(function(e){o.clean(e)})},enumerable:!1}),Object.defineProperty(e,"_templateName",{value:r,enumerable:!1}),{insert:t}):{preventDefault:!0}}.bind(this);s=this._WrapInlineTemplateRenderer(s,r,t),this._renderDeferredData(i,e,[t],[this._WrapCustomElementRenderer(s)])}.bind(this))},_CleanAllTemplates:function(){for(var e=Object.keys(this._templateMap),t=0;t<e.length;t++){var n=e[t];this._CleanTemplate(n)}this._templateMap={}},_CleanTemplate:function(e){if(this._templateMap[e]){for(var t=this._templateMap[e].length,n=0;n<t;n++)this._templateMap[e][n]();this._templateMap[e]=[]}},_AddTemplate:function(e,t){this._templateMap[e]||(this._templateMap[e]=[]),this._templateMap[e].push(t)},_CompareOptionValues:function(e,n,r){switch(e){case"hiddenCategories":case"highlightedCategories":case"selection":return t.Object.compareValues(n,r);default:return this._super(e,n,r)}}},!0),
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
t._registerLegacyNamespaceProp("AttributeGroupHandler",u.AttributeGroupHandler),t._registerLegacyNamespaceProp("ColorAttributeGroupHandler",u.ColorAttributeGroupHandler),t._registerLegacyNamespaceProp("ShapeAttributeGroupHandler",u.ShapeAttributeGroupHandler);
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
var D={_SHAPE_REGEXP:/\d/,_SHAPE_ENUMS:{circle:!0,ellipse:!0,square:!0,rectangle:!0,diamond:!0,triangleUp:!0,triangleDown:!0,plus:!0,human:!0,star:!0},shapeParseFunction:function(e,t){var n=t||D._SHAPE_ENUMS;return function(t,r,i,o){if(e[r]){if(D._SHAPE_REGEXP.test(t))return t;if(n[t])return t;throw new Error("Found: '"+t+"'. Expected one of the following: "+Object.keys(n).toString())}return o(t)}}};return D})}();
//# sourceMappingURL=ojdvt-base.js.map