/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define(["ojs/ojcore","ojs/ojlogger","customElements","ojs/ojcustomelement-utils","ojs/ojbootstrap"],function(e,t,r,i,n){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
const o={};o.proto={getClass:function(e){var t=Object.create(HTMLElement.prototype);this.InitializePrototype(t);var r=this.GetMetadata(e);o._enumerateMetadataForKey(t,r,"properties",this.DefinePropertyCallback.bind(this)),o._enumerateMetadataForKey(t,r,"methods",this.DefineMethodCallback.bind(this)),this.AddComponentMethods(t),t.setProperties=function(e){i.CustomElementUtils.getElementBridge(this)._setProperties(this,e)},Object.defineProperty(t,"set",{value:function(e,t){this.setProperty(e,t)}}),Object.defineProperty(t,"unset",{value:function(e){this.setProperty(e,void 0)}}),t.attributeChangedCallback=this.AttributeChangedCallback,t.connectedCallback=this._connectedCallback,t.disconnectedCallback=this._detachedCallback;var n=function(){var e=window.Reflect;return void 0!==e?e.construct(HTMLElement,[],this.constructor):HTMLElement.call(this)},a=this;return Object.defineProperty(n,"observedAttributes",{get:function(){return a.GetAttributes(r)}}),Object.defineProperty(t,"constructor",{value:n,writable:!0,configurable:!0}),n.prototype=t,Object.setPrototypeOf(n,HTMLElement),n},initializeBridge:function(e,t){this.METADATA=this.GetMetadata(t),this._eventListeners={},this.State=i.CustomElementUtils.getElementState(e)},AddComponentMethods:function(e){},AttributeChangedCallback:function(e,r,n){const a=i.AttributeUtils.attributeToPropertyName(e),s=i.CustomElementUtils.getElementBridge(this);if(r!==n||s.State.dirtyProps.has(a)){if(s.State.dirtyProps.delete(a.split(".")[0]),"disabled"===e&&s.ShouldRemoveDisabled()&&s._isDisabledAttributeRemoved())return void(null!=n&&(t.warn("Ignoring 'disabled' attribute change after component initialization. Use element property setter instead."),s._removeDisabledAttribute(this)));if(s.ShouldHandleAttributeChanged(this)){o.__CheckOverlappingAttribute(this,e),null===n&&(n=void 0);var l={detail:{attribute:e,value:n,previousValue:r}};if(this.dispatchEvent(new CustomEvent("attribute-changed",l)),!i.AttributeUtils.getExpressionInfo(n).expr){const t=o.__GetPropertyMetadata(a,i.CustomElementUtils.getElementProperties(this));t&&this.setProperty(a,o.__ParseAttrValue(this,e,a,n,t)),s.HandleAttributeChanged(this,e,r,n)}}}},CreateComponent:function(e){},DefineMethodCallback:function(e,t,r){},DefinePropertyCallback:function(e,t,r){},GetAttributes:function(e){return e?o.getAttributes(e.properties):[]},GetMetadata:function(e){return e[o.DESC_KEY_META]||{}},GetAliasForProperty:function(e){return e},ShouldHandleAttributeChanged:function(e){return this._bCreateCalled},ShouldCallHandleAttributeChanged:function(e){return this.ShouldHandleAttributeChanged()},HandleAttributeChanged:function(e,t,r,i){},HandleBindingsApplied:function(e,t){},HandleDetached:function(e){},HandleReattached:function(e){},InitializeElement:function(e){},InitializePrototype:function(e){},BatchedPropertySet:function(e,t){for(var r=Object.keys(t),i=0;i<r.length;i++){var n=r[i];e.setProperty(n,t[n])}},GetEventListenerProperty:function(e){var t=i.AttributeUtils.eventListenerPropertyToEventType(e),r=this._eventListeners[t];if(r)return r.getListener()},GetProperty:function(e,t,r){var n=o.__GetPropertyMetadata(t,i.CustomElementUtils.getElementProperties(e));return i.AttributeUtils.isEventListenerProperty(t)||!n||-1===t.indexOf(".")?r[t]:i.CustomElementUtils.getComplexProperty(r,t)},HandlePropertyChanged:function(e,t,r,i,n,a){var s=n?"external":"internal";o.__FirePropertyChangeEvent(e,t,r,i,s,a)},PlaybackEarlyPropertySets:function(e){if(this._allowPropertSets=!0,this._earlySets)for(;this._earlySets.length;){var t=this._earlySets.shift();e.setProperty(t.property,t.value)}},SaveEarlyPropertySet:function(e,t,r){return!this.State.isInitializingProperties&&!this._allowPropertSets&&(this._earlySets||(this._earlySets=[]),this._earlySets.push({property:t,value:r}),!0)},SetEventListenerProperty:function(e,t,r){var n=i.AttributeUtils.eventListenerPropertyToEventType(t),a=this._eventListeners[n];a||(a=this._createEventListenerWrapper(),this._eventListeners[n]=a,e.addEventListener(n,a)),null==r||r instanceof Function?a.setListener(r):o.__ThrowTypeError(e,t,r,"function")},SetProperty:function(t,r,n,a,s){var l=o.__GetPropertyMetadata(r,i.CustomElementUtils.getElementProperties(t));if(i.AttributeUtils.isEventListenerProperty(r)||!l)t[r]=n;else{var u=t.getProperty(r),p=r.split(".")[0],d=a[p];if(e.CollectionUtils.isPlainObject(d)&&(d=e.CollectionUtils.copyInto({},d,void 0,!0)),!o.__CompareOptionValues(r,l,n,u)){var c=-1!==r.indexOf(".");if(c&&(this._SKIP_PROP_CHANGE_EVENT=!0),s?this.ValidateAndSetProperty(this.GetAliasForProperty.bind(this),a,r,n,t):o.__SetProperty(this.GetAliasForProperty.bind(this),a,r,n),this._SKIP_PROP_CHANGE_EVENT=!1,c){var h={path:r,value:n,previousValue:u};this.HandlePropertyChanged(t,p,a[p],d,s,h)}return this.State.dirtyProps.add(p),{property:p,propertySet:!0,isSubproperty:c}}}return{property:null,propertySet:!1,isSubproperty:!1}},ShouldRemoveDisabled:function(){return!0},ValidateAndSetProperty:function(e,t,r,i,n){var a=this.ValidatePropertySet(n,r,i);o.__SetProperty(e,t,r,a)},ValidatePropertySet:function(e,r,n){var a=i.CustomElementUtils.getElementProperties(e),s=o.__GetPropertyMetadata(r,a),l=r.split(".");if(s)return a[l[0]].readOnly&&this.State.throwError("Read-only property '"+r+"' cannot be set."),o.checkEnumValues(e,r,n,s),null!=n?o.checkType(e,r,n,s):n;t.warn(i.CustomElementUtils.getElementInfo(e)+": Ignoring property set for undefined property '"+r+"'.")},PostCreate:function(e){e.hasAttribute("disabled")&&this.ShouldRemoveDisabled()&&!this._isDisabledAttributeRemoved()&&this._removeDisabledAttribute(e)},_connected:function(e){const t=this.State;if(t.isConnected=!0,this._bCreateCalled)t.isComplete?this.HandleReattached(e):t.registerBusyState(e);else{this._bCreateCalled=!0,t.registerBusyState(e),this.InitializeElement(e),t.setBindingProviderCallback(this.PlaybackEarlyPropertySets.bind(this,e));const r=()=>{if(!t.isDisposed){return(this.CreateComponent(e)||Promise.resolve()).then(this.PostCreate.bind(this,e))}return this._bCreateCalled=!1,Promise.reject()};t.beginCreate(r)}},_connectedCallback:function(){i.CustomElementUtils.getElementBridge(this)._connected(this)},_detachedCallback:function(){const e=i.CustomElementUtils.getElementBridge(this),t=e.State;t.isConnected=!1,t.isComplete?e.HandleDetached(this):t.resolveBusyState()},_createEventListenerWrapper:function(){var e,t=function(t){e&&e(t)};return t.setListener=function(t){e=t},t.getListener=function(){return e},t},_setProperties:function(e,t){for(var r=[],i={},n=!1,o=Object.keys(t),a=0;a<o.length;a++){var s=o[a];s.indexOf(".")>=0?r.push(s):(i[s]=t[s],n=!0)}n&&this.BatchedPropertySet(e,i);for(var l=0;l<r.length;l++){var u=r[l];e.setProperty(u,t[u])}},_isDisabledAttributeRemoved:function(){return!0===this._disabledProcessed},_removeDisabledAttribute:function(e){this._disabledProcessed=!0,e.removeAttribute("disabled")}},o.getAttributes=function(e){var t=[];return o._getAttributesFromProperties("",e,t),t},o._getAttributesFromProperties=function(e,t,r){if(t)for(var n=Object.keys(t),a=0;a<n.length;a++){var s=n[a],l=t[s];if(!l.readOnly){var u=e+s;r.push(i.AttributeUtils.propertyNameToAttribute(u)),l.properties&&o._getAttributesFromProperties(u+".",l.properties,r)}}},o._enumerateMetadataForKey=function(e,t,r,i){if(t&&t[r]){var n=t[r];Object.keys(n).forEach(function(t){i(e,t,n[t])})}},o.checkEnumValues=function(e,t,r,n){if("string"==typeof r&&n){var o=n.enumValues;if(o&&-1===o.indexOf(r))i.CustomElementUtils.getElementBridge(e).State.throwError("Invalid value '"+r+"' found for property '"+t+"'. Expected one of the following '"+o.toString()+"'.")}},o.checkType=function(e,t,r,n){const a=n.type,s=i.ElementUtils.getSupportedTypes(a);if(1===s.typeCount&&!s.any&&!s.other){const i=typeof r;if(s.array&&!Array.isArray(r)||s.object&&"object"!==i||s.string&&"string"!==i||s.number&&("number"!==i||!isFinite(r)))o.__ThrowTypeError(e,t,r,a);else if(s.boolean)return!!r}return r},o.__CompareOptionValues=function(t,r,i,n){return r.writeback?e.Object.compareValues(i,n):i===n},o.__ThrowTypeError=function(e,t,r,n){i.CustomElementUtils.getElementBridge(e).State.throwError("Invalid type '"+typeof r+"' found for property '"+t+"'. Expected value of type '"+n+"'.")},o.__CheckOverlappingAttribute=function(e,t){var r=t.split(".");if(r.length>1)for(r.pop();r.length;){var n=r.join(".");if(e.hasAttribute(n))i.CustomElementUtils.getElementBridge(e).State.throwError("Cannot set overlapping attributes '"+t+"' and '"+n+"'.");r.pop()}},o.__GetPropertyMetadata=function(e,t){var r=t;if(r)for(var i=e.split("."),n=0;n<i.length&&(r=r[i[n]])&&(!(i.length>1&&n<i.length-1)||(r=r.properties));n++);return r},o.__InitProperties=function(e,t){const r=i.CustomElementUtils.getElementBridge(e);var n=i.CustomElementUtils.getElementProperties(e);if(n){const c=r.State;c.isInitializingProperties=!0;for(var a=e.attributes,s=0;s<a.length;s++){var l=a[s],u=i.AttributeUtils.attributeToPropertyName(l.nodeName),p=o.__GetPropertyMetadata(u,n);if(p&&!p.readOnly)if(o.__CheckOverlappingAttribute(e,l.nodeName),!i.AttributeUtils.getExpressionInfo(l.value).expr){var d=o.__ParseAttrValue(e,l.nodeName,u,l.value,p);r.ValidateAndSetProperty(r.GetAliasForProperty.bind(r),t,u,d,e)}}c.isInitializingProperties=!1}},o.__SetProperty=function(e,t,r,i){var n,o=t,a=r.split("."),s=e(a[0]);a.length>1&&!t[s]&&(o=n={});for(var l=0;l<a.length;l++){var u=e(a[l]);l===a.length-1?o[u]=i:o[u]||(o[u]={}),o=o[u]}n&&(t[s]=n[s])},o.__ParseAttrValue=function(e,t,r,n,o){if(null==n)return n;var a=o.type,s=i.CustomElementUtils.getElementBridge(e);function l(r){var n;try{n=i.AttributeUtils.coerceValue(e,t,r,a)}catch(e){s.State.throwError("Error parsing attribute value.",e)}return n}var u=i.CustomElementUtils.getElementDescriptor(e.tagName).parseFunction;return u?u(n,r,o,function(e){return l(e)}):l(n)},o.__ProcessEventListeners=function(t){var r=e.CollectionUtils.copyInto({},t,void 0,!0,1);return r.properties=r.properties||{},o._enumerateMetadataForKey(null,r,"properties",function(e,t){var n=i.AttributeUtils.propertyNameToChangeEventType(t),o=i.AttributeUtils.eventTypeToEventListenerProperty(n);r.properties[o]={_derived:!0,_eventListener:!0}}),o._enumerateMetadataForKey(null,r,"events",function(e,t){var n=i.AttributeUtils.eventTypeToEventListenerProperty(t);r.properties[n]={_derived:!0,_eventListener:!0}}),r},o.__FirePropertyChangeEvent=function(e,t,r,n,o,a){var s=i.CustomElementUtils.getElementBridge(e);if(!s._SKIP_PROP_CHANGE_EVENT){var l={};a&&(l.subproperty=a),l.value=r,l.previousValue=n,l.updatedFrom=o,s.beforePropertyChangedEvent&&s.beforePropertyChangedEvent(e,t,l),("external"!==o||s.State.isComplete)&&e.dispatchEvent(new CustomEvent(t+"Changed",{detail:l}))}},o.__DefineDynamicObjectProperty=function(e,t,r,i){Object.defineProperty(e,t,{enumerable:!0,get:r,set:i})},o.DESC_KEY_META="metadata",e._registerLegacyNamespaceProp("BaseCustomElementBridge",o),n.whenDocumentReady().then(function(){!
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
function(){var e=document.createElement("div");e.style.border="1px solid",e.style.borderColor="red green",e.style.position="absolute",e.style.top="-999px",e.style.backgroundImage="url(data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACwAAAAAAQABAAACAkQBADs=)";var t=document.body;t.appendChild(e);var r=window.getComputedStyle(e),i=r.backgroundImage;r.borderTopColor!==r.borderRightColor&&(null==i||"none"!==i&&"url (invalid-url:)"!==i)||t.classList.add("oj-hicontrast"),t.removeChild(e)}()})});
//# sourceMappingURL=ojcustomelement.js.map