/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define(["exports","ojs/ojthemeutils","ojs/ojcore-base","jquery"],function(e,t,n,o){"use strict";n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,o=o&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o;
/**
   * @license
   * Copyright (c) 2004 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
const i={};var r,a,s,l,c,u,d;i._HTML_START_TAG="<html>",i._HTML_END_TAG="</html>",i._LEGAL_ELEMENTS={SPAN:1,B:1,I:1,EM:1,BR:1,HR:1,LI:1,OL:1,UL:1,P:1,TT:1,BIG:1,SMALL:1,PRE:1},i._LEGAL_ATTRIBUTES={class:1,style:1},i.isHTMLContent=function(e){return 0===e.indexOf(i._HTML_START_TAG)&&e.lastIndexOf(i._HTML_END_TAG)===e.length-7},i.cleanHtml=function(e){var t=o(document.createElement("span")).get(0);return t.innerHTML=e,e&&e.indexOf("<")>=0&&i._cleanElementHtml(t),t},i._cleanElementHtml=function(e){for(var t=e.childNodes,n=t.length-1;n>=0;n--){var r=t.item(n);if(r&&1===r.nodeType)if(i._LEGAL_ELEMENTS[r.nodeName]){for(var a=r.attributes,s=a.length-1;s>=0;s--){var l=a[s];void 0!==o(r).attr(l.name)&&(i._LEGAL_ATTRIBUTES[l.name]||r.removeAttribute(l.nodeName))}i._cleanElementHtml(r)}else r&&e.removeChild(r)}},i.isAncestor=function(e,t){for(var n=t.parentNode;n;){if(n===e)return!0;n=n.parentNode}return!1},i.isAncestorOrSelf=function(e,t){return t===e||i.isAncestor(e,t)},i.addResizeListener=function(e,t,n,o){let r=i._RSZ_TRKR;o&&(r=i._RSZ_TRKR_OBS,i._OBS_BASED.set(t,!0));let a=r.get(e);null==a&&(a=new i._ResizeTracker(e,o),r.set(e,a),a.start()),a.addListener(t,n)},i.removeResizeListener=function(e,t){const n=i._OBS_BASED.get(t)?i._RSZ_TRKR_OBS:i._RSZ_TRKR,o=n.get(e);null!=o&&(o.removeListener(t),o.isEmpty()&&(o.stop(),n.delete(e)))},i.fixResizeListeners=function(e){o(e).find(".oj-helper-detect-expansion").parent().each(function(e,t){var n=i._RSZ_TRKR.get(t);null!=n&&n.init(!0)})},i.isMetaKeyPressed=function(e){var t=n.AgentUtils.getAgentInfo();return n.AgentUtils.OS.MAC===t.os?e.metaKey:e.ctrlKey},i.dispatchEvent=function(e,t){var n="disabled",o=e[n];try{e[n]=!1,e.dispatchEvent(t)}finally{e[n]=o}},i._invokeAfterPaint=(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,0)}).bind(window),i._cancelInvokeAfterPaint=(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||function(e){return window.clearTimeout(e)}).bind(window),i._ResizeTracker=function(e,t){e instanceof o&&(e=e[0]);var n=o.Callbacks(),r=[],a=[],s=0,l=null,c=null,u=null,d=null,f=null,h=null,v=null;function g(e){var t=!1;if(null!=d.offsetParent){var n=d.offsetWidth,o=d.offsetHeight;c===n&&u===o||(s=2,E(n,o),t=!0,e&&L(!0))}return t}function m(t){const n=t[0].borderBoxSize;L(!1,[n?(n[0]||n).inlineSize:e.offsetWidth,n?(n[0]||n).blockSize:e.offsetHeight])}function L(t,o){var a=o?o[0]:e.offsetWidth,s=o?o[1]:e.offsetHeight;n.has()&&(t?(null!==l&&i._cancelInvokeAfterPaint(l),l=i._invokeAfterPaint(function(){l=null,n.fire(a,s)})):n.fire(a,s));for(var c=0;c<r.length;c++)r[c].getCallback()(a,s)}function p(e){e.stopPropagation(),g(!0)||s>0&&null!=d.offsetParent&&(0===d.scrollLeft||0===d.scrollTop)&&(s-=1,E(c,u))}function E(e,t){c=e,u=t;var n=d.firstChild.style,o=1;do{n.width=e+o+"px",n.height=t+o+"px",d.scrollLeft=o,d.scrollTop=o,o+=1}while((0===d.scrollTop||0===d.scrollLeft)&&o<=5);f.scrollLeft=e,f.scrollTop=t}this.addListener=function(e,t){void 0===t||isNaN(t)||0===t?n.add(e):(r.push(new i._collapsingListenerManager(e,t)),a.push(e))},this.removeListener=function(e){var t=a.indexOf(e);t>=0?(a.splice(t,1),r.splice(t,1)[0].stop()):n.remove(e)},this.isEmpty=function(){return!n.has()&&0===a.length},this.start=function(){if(t&&window.ResizeObserver instanceof Function)(v=new ResizeObserver(m)).observe(e,{box:"border-box"});else{h=p;var n=e.childNodes[0];(d=document.createElement("div")).className="oj-helper-detect-expansion";var o=document.createElement("div");d.appendChild(o),null!=n?e.insertBefore(d,n):e.appendChild(d),d.addEventListener("scroll",h,!1),(f=document.createElement("div")).className="oj-helper-detect-contraction";var i=document.createElement("div");i.style.width="200%",i.style.height="200%",f.appendChild(i),e.insertBefore(f,d),f.addEventListener("scroll",h,!1),this.init(!1)}},this.stop=function(){null!=l&&(i._cancelInvokeAfterPaint(l),l=null),null!=v?(v.disconnect(),v=null):null!=d&&(d.removeEventListener("scroll",h),f.removeEventListener("scroll",h),d.parentNode&&e.removeChild(d),f.parentNode&&e.removeChild(f))},this.init=function(e){if(d){var t=g(e);e&&!t&&null!=d.offsetParent&&E(c,u)}}},i._RSZ_TRKR=new WeakMap,i._RSZ_TRKR_OBS=new WeakMap,i._OBS_BASED=new WeakMap,i.isValidIdentifier=function(e){return/^[A-Za-z][0-9A-Z_a-z-]*$/.test(e)},i._collapsingListenerManager=function(e,t){var n=null,o=null,i=function(){e.apply(null,n),o=null},r=function(){n=Array.prototype.slice.call(arguments),null==o&&(o=window.setTimeout(i,t))};this.getCallback=function(){return r},this.stop=function(){null!=o&&(window.clearTimeout(o),o=null)}},i.isTouchSupported=function(){return"ontouchstart"in window||navigator.msMaxTouchPoints>0||navigator.maxTouchPoints>0},i.setInKoCleanExternal=function(e){i._koCleanNode=e},i.unwrap=function(e,t){var n=i._koCleanNode;n&&e.get(0)===n||(t?t.replaceWith(e):e.unwrap())},i.isChromeEvent=function(e){function t(e){var t=e.target,n=o(t),r=t.getBoundingClientRect(),a=i.getScrollBarWidth(),s="ltr"===i.getReadingDirection();return!(!s||"HTML"!==t.nodeName&&"visible"===n.css("overflow-x")||!(e.clientX>r.right-a))||(!s&&"HTML"===t.nodeName&&e.clientX>r.left-a||(!s&&"visible"!==n.css("overflow-x")&&e.clientX<r.left+a||("HTML"===t.nodeName||"visible"!==n.css("overflow-y"))&&e.clientY>r.bottom-a))}if(!("clientX"in e)||!("clientY"in e))return!1;var r=n.AgentUtils.getAgentInfo();return n.AgentUtils.OS.ANDROID!==r.os&&n.AgentUtils.OS.IOS!==r.os&&(n.AgentUtils.ENGINE.GECKO===r.engine?function(e){try{return!e.originalTarget.localName}catch(e){return!0}}(e):n.AgentUtils.ENGINE.WEBKIT===r.engine||n.AgentUtils.ENGINE.BLINK===r.engine?t(e):n.AgentUtils.BROWSER.IE===r.browser&&t(e))},i.getScrollBarWidth=function(){var e=i._scrollBarWidth;if(o.isNumeric(e))return e;var t=o("<div></div>");o(document.body).append(t),t.width(50).height(50).css({overflow:"scroll",visibility:"hidden",position:"absolute"});var n=o("<div></div>");n.height(1),t.append(n);var r=n.width(),a=t.width();return t.remove(),e=a-r,i._scrollBarWidth=e,e},i.getReadingDirection=function(){var e=document.documentElement.getAttribute("dir");return e&&(e=e.toLowerCase()),"rtl"===e?"rtl":"ltr"},i.setScrollLeft=function(e,t){if("rtl"===i.getReadingDirection()){var o=n.AgentUtils.getAgentInfo().browser;o===n.AgentUtils.BROWSER.IE||o===n.AgentUtils.BROWSER.EDGE?e.scrollLeft=t:e.scrollLeft=-t}else e.scrollLeft=t},i.getCSSLengthAsInt=function(e){if(!isNaN(e))return parseInt(e,10);if(e&&e.length>0&&"auto"!==e){var t=parseInt(e,10);return isNaN(t)&&(t=0),t}return 0},i.getCSSLengthAsFloat=function(e){if(!isNaN(e))return parseFloat(e);if(e&&e.length>0){var t=parseFloat(e);return isNaN(t)&&(t=0),t}return 0},i._LOGICAL_PARENT_DATA="oj-logical-parent",i.getLogicalParent=function(e){if(e)return e.data(i._LOGICAL_PARENT_DATA)},i.setLogicalParent=function(e,t){e&&(null===t?e.removeData(i._LOGICAL_PARENT_DATA):e.data(i._LOGICAL_PARENT_DATA,t))},i.isLogicalAncestorOrSelf=function(e,t){n.Assert.assertDomElement(e),n.Assert.assertDomElement(t);for(var r=t;r;){if(r===e)return!0;var a=i.getLogicalParent(o(r));r=a?a[0]:r.parentNode}return!1},i.validateURL=function(e,t){var n=t||["http:","https:"],o=document.createElement("a");o.href=e;var i=o.protocol;if(null!=i&&(i=i.toLowerCase()),n.indexOf(i)<0&&""!==i)throw new Error(i+" is not a valid URL protocol")},i._suppressNativeContextMenu=function(){o(document.body).hasClass("oj-hybrid")&&!o(document.body).hasClass("oj-hybrid-show-context-menu")&&document.body.addEventListener("contextmenu",function(e){"INPUT"!==e.target.nodeName&&"TEXTAREA"!==e.target.nodeName&&e.preventDefault()},!0)},i._suppressNativeContextMenu(),i.PRESS_HOLD_THRESHOLD=750,i.recentTouchEnd=function(){var e=0;function t(){e=Date.now()}return document.addEventListener("touchend",t,!0),document.addEventListener("touchcancel",t,!0),function(){return Date.now()-e<500}}(),i.recentTouchStart=(r=0,a=i.PRESS_HOLD_THRESHOLD+50,document.addEventListener("touchstart",function(){r=Date.now()},{passive:!0,capture:!0}),function(){return Date.now()-r<a}),i.recentPointer=(l=0,c=i.PRESS_HOLD_THRESHOLD+600,document.addEventListener("mousedown",function(){var e=Date.now();(!s||e>l+i.PRESS_HOLD_THRESHOLD)&&(l=e,s=!1)},!0),document.addEventListener("touchstart",function(){l=Date.now(),s=!0},{passive:!0,capture:!0}),document.addEventListener("mouseup",function(){l=Date.now(),s=!1},!0),document.addEventListener("touchend",function(){l=Date.now(),s=!1},!0),function(){return Date.now()-l<(s?c:600)}),i.makeFocusable=(u=0,d=(t.parseJSONFromFontFamily("oj-focus-config")||{}).focusHighlightPolicy,function(e){var t=e.element,n="ojFocusable";if(e.remove){t.removeClass("oj-focus oj-focus-highlight");var r=t.data(n);if(null==r)return;var a=".ojFocusable"+(""+r).split(",").join(" .ojFocusable");t.off(a).removeData(n)}else{var s=e.afterToggle||o.noop,l=e.applyHighlight?function(t){t.addClass("oj-focus"),function(e,t){switch(e?e():d){case"all":return!0;case"none":return!1;default:return!(i.recentPointer()||t&&t())}}(e.getFocusHighlightPolicy,e.recentPointer)&&t.addClass("oj-focus-highlight"),s("focusin")}:function(e){e.addClass("oj-focus"),s("focusin")},c=!1;(e.setupHandlers||function(i,r){var a=e.component,s=function(e){i(o(e.currentTarget)),c=!0},l=function(e){c&&(r(o(e.currentTarget)),c=!1)};if(a)a._on(t,{focusin:s,focusout:l});else{var d=u;u+=1;var f=t.data(n);t.data(n,null==f?d:f+","+d);var h={},v=".ojFocusable"+d;h["focusin"+v]=s,h["focusout"+v]=l,t.on(h)}})(l,function(e){e.removeClass("oj-focus oj-focus-highlight"),s("focusout")})}});const f=i.isHTMLContent,h=i.cleanHtml,v=i.isAncestor,g=i.isAncestorOrSelf,m=i.addResizeListener,L=i.removeResizeListener,p=i.fixResizeListeners,E=i.isMetaKeyPressed,_=i.dispatchEvent,A=i.isValidIdentifier,S=i.isTouchSupported,T=i.setInKoCleanExternal,R=i.unwrap,w=i.isChromeEvent,N=i.getScrollBarWidth,O=i.getReadingDirection,C=i.setScrollLeft,P=i.getCSSLengthAsInt,b=i.getCSSLengthAsFloat,D=i.getLogicalParent,H=i.setLogicalParent,I=i.isLogicalAncestorOrSelf,y=i.validateURL,B=i.PRESS_HOLD_THRESHOLD,M=i.recentTouchEnd,j=i.recentTouchStart,x=i.recentPointer,F=i.makeFocusable;e.PRESS_HOLD_THRESHOLD=B,e.addResizeListener=m,e.cleanHtml=h,e.dispatchEvent=_,e.fixResizeListeners=p,e.getCSSLengthAsFloat=b,e.getCSSLengthAsInt=P,e.getLogicalParent=D,e.getReadingDirection=O,e.getScrollBarWidth=N,e.isAncestor=v,e.isAncestorOrSelf=g,e.isChromeEvent=w,e.isHTMLContent=f,e.isLogicalAncestorOrSelf=I,e.isMetaKeyPressed=E,e.isTouchSupported=S,e.isValidIdentifier=A,e.makeFocusable=F,e.recentPointer=x,e.recentTouchEnd=M,e.recentTouchStart=j,e.removeResizeListener=L,e.setInKoCleanExternal=T,e.setLogicalParent=H,e.setScrollLeft=C,e.unwrap=R,e.validateURL=y,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ojdomutils.js.map