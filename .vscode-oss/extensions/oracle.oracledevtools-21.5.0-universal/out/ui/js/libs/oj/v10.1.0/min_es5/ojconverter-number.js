/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define(["exports","ojs/ojlogger","ojs/ojconverterutils-i18n","ojs/ojlocaledata","ojs/ojconverter","ojs/ojtranslation","ojs/ojconfig","ojs/ojcore-base","ojs/ojvalidation-error"],function(e,r,t,n,i,a,o,s,u){"use strict";i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i,s=s&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s;
/**
   * @license
   * Copyright (c) 2016 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
var l=function(){var e,n,i,a,o,s=/^[+-]?infinity$/i,u=/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/,l=/([^+-.0-9]*)([+-]?\d*\.?\d*(E[+-]?\d+)?).*$/,c=/([\^$.*+?|\[\](){}])/g,m=/(^0\.0*)([^0].*$)/,p=/^0+$/,g={trillion:[1e14,1e13,1e12],billion:[1e11,1e10,1e9],million:[1e8,1e7,1e6],thousand:[1e5,1e4,1e3]},v={trillion:1e12,billion:1e9,million:1e6,thousand:1e3},d={HALF_UP:"ceil",CEILING:"ceil",UP:"ceil",HALF_DOWN:"floor",FLOOR:"floor",DOWN:"floor",DEFAULT:"round"};function f(e,r,t){var n;for(n=e.length;n<r;n+=1)e=t?"0"+e:e+"0";return e}function y(e,r,t,n,i){var a=e[r];return void 0!==a?(a=Number(a),(isNaN(a)||a<t||a>n)&&function(e,r,t,n){var i=new RangeError(e+" is out of range.  Enter a value between "+r+" and "+t+" for "+n),a={errorCode:"numberOptionOutOfRange",parameterMap:{value:e,minValue:r,maxValue:t,propertyName:n}};throw i.errorInfo=a,i}(a,t,n,r),Math.floor(a)):i}function h(e){var r=e||"en-US",t=r.indexOf("-u-nu-"),n="latn";return-1!==t&&(n=r.substr(t+6,4)),n}function b(e,s,u,l){var c,m=s,p=t.OraI18nUtils.getLocaleElementsMainNode(e),g=function(e,r){if(void 0===r)return"latn";var t=h(r),n="symbols-numberSystem-"+t;return void 0===e.numbers[n]&&(t="latn"),t}(p,l);m.numberingSystemKey=g,m.numberingSystem="symbols-numberSystem-"+g;var v=u.lenientParse;if(m.lenientParse=v||"full",m.style=u.style,void 0!==u.pattern&&u.pattern.length>0)c=u.pattern;else{var d;switch(m.style){case"decimal":d="decimalFormats-numberSystem-";break;case"currency":d="currencyFormats-numberSystem-";break;case"percent":d="percentFormats-numberSystem-";break;default:d="decimalFormats-numberSystem-"}d+=m.numberingSystemKey,c=p.numbers[d].standard}var f=u.decimalFormat;void 0===f&&(f=u.currencyFormat),void 0===f||"decimal"!==m.style&&"currency"!==m.style||(m.shortDecimalFormat=p.numbers["decimalFormats-numberSystem-latn"][f].decimalFormat);var b=p.numbers[m.numberingSystem].decimal,S=p.numbers[m.numberingSystem].group,x=u.separators;if(void 0!==x){m.separators=x;var D=x.decimal,O=x.group;void 0!==D&&""!==D&&(b=x.decimal),void 0!==O&&(S=x.group)}var I=t.OraI18nUtils.getLocaleElementsMainNodeKey(e),N=I.split("-")[0];if(m.plurals=e.supplemental.plurals,m.lang=N,m.pat=c,m.minusSign=p.numbers[m.numberingSystem].minusSign,m.decimalSeparator=b,m.exponential=p.numbers[m.numberingSystem].exponential,m.groupingSeparator=S,m.currencyDisplay=u.currencyDisplay,void 0!==u.currency&&(m.currencyCode=u.currency.toUpperCase()),void 0!==u.unit&&(m.unit=u.unit.toLowerCase()),function(e,r,t,s){for(var u,l=s,c=!1,m=!1,p=0,g=0,v=!0,d=1;d>=0&&g<r.length;--d){var f=!1,y="",h="",b=-1,S=1,x=0,D=0,O=0,I=-1,N=-1,U=0;v=!0;for(var E=g;E<r.length;++E){var P=r.charAt(E);switch(U){case 0:case 2:if(f){if("'"===P){E+1<r.length&&"'"===r.charAt(E+1)?(E+=1,v?y=y.concat("''"):h=h.concat("''")):f=!1;continue}}else{if("#"===P||"0"===P||","===P||"."===P){U=1,E-=1;continue}if("¤"===P){void 0===e.currency&&F("style"),l.style="currency";var j=E+1<r.length&&"¤"===r.charAt(E+1);j&&(E+=1),v?y=y.concat(j?"'¤¤":"'¤"):h=h.concat(j?"'¤¤":"'¤");continue}if("'"===P){if("'"===P){E+1<r.length&&"'"===r.charAt(E+1)?(E+=1,v?y=y.concat("''"):h=h.concat("''")):f=!0;continue}}else{if(";"===P){0!==U&&0!==d||M(r),g=E+1,E=r.length;continue}if("%"===P){l.style="percent",1!==S&&M(r),l.isPercent=!0,S=100,v?y=y.concat("'%"):h=h.concat("'%");continue}if("‰"===P){1!==S&&M(r),l.style="perMill",l.isPerMill=!0,S=1e3,v?y=y.concat("'‰"):h=h.concat("'‰");continue}if("-"===P){v?y=y.concat("'-"):h=h.concat("'-");continue}}}v?y=y.concat(P):h=h.concat(P);break;case 1:if(1!==d){0==(p-=1)&&(U=2,v=!1);continue}if(p+=1,"#"===P)D>0?O+=1:x+=1,I>=0&&b<0&&(I+=1);else if("0"===P)O>0&&M(r),D+=1,I>=0&&b<0&&(I+=1);else if(","===P)N=I,I=0;else{if("."!==P){if(A=E,T="E",$=void 0,$=r.substr(A,T.length),null!==new RegExp(T,"i").exec($)){for(m&&M(r),m=!0,u=0,E+="E".length;E<r.length&&"0"===r.charAt(E);)u+=1,p+=1,E+=1;(x+D<1||u<1)&&M(r),U=2,v=!1,E-=1;continue}U=2,v=!1,E-=1,p-=1;continue}b>=0&&M(r),b=x+D+O}}}if(0===D&&x>0&&b>=0){var _=b;0===_&&(_+=1),O=x-_,x=_-1,D=1}if((b<0&&O>0||b>=0&&(b<x||b>x+D)||0===I||f)&&M(r),1===d){a=n=y,o=i=h;var C=x+D+O,L=b>=0?b:C;l.minimumIntegerDigits=L-x,l.maximumIntegerDigits=m?x+l.minimumIntegerDigits:2147483647,l.maximumFractionDigits=b>=0?C-b:0,l.minimumFractionDigits=b>=0?x+D-b:0,l.groupingSize=I>0?I:0,l.groupingSize0=N}else a=y,o=h,c=!0}var A,T,$;0===r.length&&(n="",i="",l.minimumIntegerDigits=0,l.maximumIntegerDigits=2147483647,l.minimumFractionDigits=0,l.maximumFractionDigits=2147483647),l.useExponentialNotation=m,l.minExponentDigits=u,(!c||0===a.localeCompare(n)&&0===o.localeCompare(i))&&("currency"===l.style&&"ar"===l.lang?(o=i+"'‏-",a=n):(o=i,a="'-"+n)),function(e,r){var t=r,s={};null!==n&&(t.positivePrefix=w(n,e,t,s)),null!==i&&(t.positiveSuffix=w(i,e,t,s)),null!==a&&(t.negativePrefix=w(a,e,t,s)),null!==o&&(t.negativeSuffix=w(o,e,t,s)),void 0!==s.name&&(t.positiveSuffix=" "+s.name,t.positivePrefix="","ar"===t.lang?(t.negativeSuffix=e.numbers[t.numberingSystem].minusSign+" "+s.name,t.negativePrefix=""):(t.negativeSuffix=" "+s.name,t.negativePrefix=e.numbers[t.numberingSystem].minusSign))}(t,l)}(u,c,p,m),void 0===u.pattern&&(m.minimumIntegerDigits=y(u,"minimumIntegerDigits",1,21,m.minimumIntegerDigits),void 0!==u.maximumFractionDigits&&(m.maximumFractionDigits=y(u,"maximumFractionDigits",0,20,m.maximumFractionDigits),m.maximumFractionDigits<m.minimumFractionDigits&&(m.minimumFractionDigits=m.maximumFractionDigits)),void 0!==u.minimumFractionDigits&&(m.minimumFractionDigits=y(u,"minimumFractionDigits",0,20,m.minimumFractionDigits)),m.maximumFractionDigits<m.minimumFractionDigits&&(m.maximumFractionDigits=m.minimumFractionDigits,r.info("maximumFractionDigits is less than minimumFractionDigits, so maximumFractionDigits will be set to minimumFractionDigits")),"currency"===m.style&&void 0===u.minimumFractionDigits&&(void 0===f||"standard"===f))){var U=e.supplemental.currencyData.fractions[u.currency];if(void 0!==U){var E=parseInt(U._digits,10);m.minimumFractionDigits=E,m.maximumFractionDigits=E}}}function F(e){var r=new TypeError('The property "currency" is required when the property "'+e+'" is "currency". An accepted value is a three-letter ISO 4217 currency code.'),t={errorCode:"optionTypesMismatch",parameterMap:{propertyName:e,propertyValue:"currency",requiredPropertyName:"currency",requiredPropertyValueValid:"a three-letter ISO 4217 currency code"}};throw r.errorInfo=t,r}function S(e,r){var n=t.OraI18nUtils.getGetOption(e,r),i=n("style","string",["currency","decimal","percent","unit","perMill"],"decimal");if("decimal"===i||"currency"===i){var a="decimal"===i?"decimalFormat":"currencyFormat";i=n(a,"string",["standard","short","long"]),"OraNumberConverter.parse"===r&&void 0!==i&&"standard"!==i&&function(e){var r=new Error("long and short "+e+" are not supported for parsing"),t={errorCode:"unsupportedParseFormat",parameterMap:{shortFormats:e}};throw r.errorInfo=t,r}(a)}var o=n("currency","string");"currency"===i&&void 0===o&&F("style"),o=n("unit","string"),"unit"===i&&void 0===o&&function(e){var r=new TypeError('The property "unit" is required when the property "'+e+'" is "unit". An accepted value is "byte" or "bit".'),t={errorCode:"optionTypesMismatch",parameterMap:{propertyName:e,propertyValue:"unit",requiredPropertyName:"unit",requiredPropertyValueValid:"byte or bit"}};throw r.errorInfo=t,r}("style"),i=n("roundingMode","string",["UP","DOWN","FLOOR","CEILING","HALF_UP","HALF_DOWN","HALF_EVEN"])}function x(e,r,n){var i=n.groupingSize,a=n.groupingSize0,o=n.decimalSeparator,s=e+"",u=s.split(/e/i),l=u.length>1?parseInt(u[1],10):0,c=(u=(s=u[0]).split(".")).length>1?u[1]:"",m=Math.min(n.maximumFractionDigits,c.length-l);u.length>1&&c.length>l&&(e=D(e,m,r.roundingMode||"DEFAULT")),l=(u=(s=Math.abs(e)+"").split(/e/i)).length>1?parseInt(u[1],10):0,u=(s=u[0]).split("."),s=u[0],c=u.length>1?u[1]:"",l>0?(s+=(c=f(c,l,!1)).slice(0,l),c=c.substr(l)):l<0&&(c=(s=f(s,1+(l=-l),!0)).slice(-l,s.length)+c,s=s.slice(0,-l)),m>0&&c.length>0?(c=c.length>m?c.slice(0,m):f(c,m,!1),!0===p.test(c)&&(c=c.slice(0,n.minimumFractionDigits)),c=o+c):c=n.minimumFractionDigits>0?o:"",c=f(c=t.OraI18nUtils.trimRightZeros(c),o.length+n.minimumFractionDigits,!1);var g=n.groupingSeparator,v="";!1===r.useGrouping&&void 0===r.pattern&&(g="");var d=(s=f(s,n.minimumIntegerDigits,!0)).length-1;for(c=c.length>1?c:"";d>=0;){if(0===i||i>d)return s.slice(0,d+1)+(v.length?g+v+c:c);v=s.slice(d-i+1,d+1)+(v.length?g+v:""),d-=i,a>0&&(i=a)}return s.slice(0,d+1)+g+v+c}function D(e,r,t){var n,i=t,a=function(e){var r=e.toString(),t=!1;"-"===(r=r.replace("E","e")).charAt(0)&&(t=!0,r=r.substring(1));var n=r.split("e"),i=n[0],a=Number(n[1]);if(a>0)if((r=i.substr(0,1)+i.substr(2)).length-1<a)for(var o=a+1-r.length;o>0;)r+="0",o-=1;else r.length-1>a&&(r=r.substr(0,a+1)+"."+r.substr(a+1));else if(a<0){var s=i.substr(0,1)+i.substr(2);r="0.";for(var u=a;u<-1;u++)r+="0";r+=s}return t&&(r="-"+r),r}(e);if(void 0===(a=a.split("."))[1])return Math.abs(e);if("DEFAULT"!==t){if("HALF_UP"===t||"HALF_EVEN"===t||"HALF_DOWN"===t){if("5"===a[1][r]){var o=a[1].substr(r);(o=parseInt(o,10))>5&&(i="HALF_UP")}else i="DEFAULT";e=Math.abs(e)}n=function(e,r,t){if(0===r)return Math[t](e);var n=e.toString().split("e"),i=n[0],a=n[1],o=i+"e"+(a?parseInt(a,10)-r:-r),s=parseFloat(o),u=Math[t](s);return n=u.toString().split("e"),i=n[0],a=n[1],o=i+"e"+(a?parseInt(a,10)+r:r),s=parseFloat(o)}(e,-r,i=function(e,r,t,n){var i=d[r];if("HALF_EVEN"===r){var a;if(0===t){var o=e[0].length;a=parseInt(e[0][o-1],10)}else a=parseInt(e[1][t-1],10);i=a%2==0?d.HALF_DOWN:d.HALF_UP}else"UP"===r&&n<0?i=d.DOWN:"DOWN"===r&&n<0&&(i=d.UP);return i}(a,i,r,e))}else{var s=Math.pow(10,r);if(n=Math.round(e*s)/s,!isFinite(n))return e}return Math.abs(n)}function O(e,r,n,i,a){var o=t.OraI18nUtils.getLocaleElementsMainNode(n);if(!isFinite(e))return e===1/0||e===-1/0?o.numbers[i.numberingSystem].infinity:"NaN";var s=e;!0===i.isPercent||"percent"===i.style?s*=100:!0===i.isPerMill&&(s*=1e3);var u=r.decimalFormat;void 0===u&&(u=r.currencyFormat);var l=i.style;s="decimal"!==l&&"currency"!==l||void 0===u||"standard"===u?!0===i.useExponentialNotation?function(e,r){var t=e+"",n=0,i=t.split(/e/i),a=i[0];m.lastIndex=0;var o=m.exec(a);null!==o?(n=o[1].length-1,a=o[2]):a=a.replace(".","");var s=i.length>1?parseInt(i[1],10):0,u=parseInt(a,10),l=r.minimumIntegerDigits+r.maximumFractionDigits;if(a.length>l){l-=a.length;var c=Math.pow(10,l);u=Math.round(u*c)}var p=r.minimumIntegerDigits+r.minimumFractionDigits;u=f(u+="",p,!1),-1!==t.indexOf(".")?s-=r.minimumIntegerDigits-t.indexOf(".")+n:s-=p-a.length-r.minimumFractionDigits;var g=Math.abs(s);g=f(g+"",r.minExponentDigits,!0),s<0&&(g=r.minusSign+g);var v=u.slice(0,r.minimumIntegerDigits);return u.slice(r.minimumIntegerDigits).length>0?v+=r.decimalSeparator+u.slice(r.minimumIntegerDigits)+r.exponential+g:v+=r.exponential+g,v}(s,i):"unit"===l?function(e,r,n,i){var a,o,s=Math.abs(e);s>=1099511627776?(a="digital-tera",o=s/1099511627776):s>=1073741824?(a="digital-giga",o=s/1073741824):s>=1048576?(a="digital-mega",o=s/1048576):s>=1024?(a="digital-kilo",o=s/1024):(a="digital-",o=s),a+=n.unit;var u=n.lang,l=n.plurals[u](o);l="unitPattern-count-"+l,e<0&&(o=-o);var c=x(o,r,n),m=i.units.narrow[a][l];return c=t.OraI18nUtils.formatString(m,[c])}(s,r,i,o):x(s,r,i):function(e,r,t){var n,i,a,o=Math.abs(e),s=function(e){for(var r=Object.keys(g),t=0;t<r.length;t++)for(var n=r[t],i=g[n].length,a=0;a<i;a++)if(g[n][a]<=e)return[n,g[n][a]];return[e,null]}(o),u="";if(null!==s[1]){var l=t.lang,c=t.plurals[l](Math.floor(o/v[s[0]]));if(n=s[1]+"-count-"+c,void 0===(n=t.shortDecimalFormat[n])&&(c="other",n=s[1]+"-count-"+c,n=t.shortDecimalFormat[n]),a=(i=function(e){var r=0,t=0,n=0,i="";if("0"!==e[0]){for(;"0"!==e[r]&&r<e.length;)r+=1;i=e.substr(0,r),n=r}for(r=n;r<e.length&&"0"===e[r];r++)t+=1;return[i,t]}(n))[1],u=i[0],a<n.length){var m=1*Math.pow(10,a);o/=m=s[1]/m*10}}var p="";return void 0!==n&&(p=n.substr(a+i[0].length)),e<0&&(o=-o),p=u+x(o,r,t)+(p=p.replace(/'\.'/g,"."))}(s,r,i);var c="";c+=e<0&&s-0!=0?i.negativePrefix+s+i.negativeSuffix:i.positivePrefix+s+i.positiveSuffix;var p=h(a);if(void 0===t.OraI18nUtils.numeringSystems[p]&&(p="latn"),"latn"!==p){var d,y=[];for(d=0;d<c.length;d++)c[d]>="0"&&c[d]<="9"?y.push(t.OraI18nUtils.numeringSystems[p][c[d]]):y.push(c[d]);return y.join("")}return c}function I(e,r){var n=r.groupingSeparator,i=r.decimalSeparator,a=r.minusSign,o="",s="",u=t.OraI18nUtils.toUpper(r.exponential),c=t.OraI18nUtils.toUpper(e),m=n;c=(c=c.split(u).join("E")).split(m).join("");var p=m.replace(/\u00A0/g," ");m!==p&&(c=c.split(p).join("")),"."===(c=c.split(i).join(".")).charAt(0)&&(c=c.substr(1),s="."),c=c.replace(a,"-");var g=s+l.exec(c)[2];return t.OraI18nUtils.startsWith(g,"-")?(g=g.substr("-".length),o="-"):t.OraI18nUtils.startsWith(c,"+")&&(g=g.substr("+".length),o="+"),[o,g]}function N(e,r,n,i){return isNaN(e)&&U(n.style,n,i),!0===n.isPercent||"percent"===n.style?e/=100:!0===n.isPerMill&&(e/=1e3),t.OraI18nUtils.getGetOption(r,"OraNumberConverter.parse")("roundDuringParse","boolean",[!0,!1],!1)&&(e=function(e,r,t){var n=r.maximumFractionDigits,i=e<0,a=t.roundingMode||"DEFAULT",o=D(e,n,a);return i?-o:o}(e,n,r)),e}function U(e,r,t){var n,i="Enter a number in this format:"+r.pat;switch(e){case"decimal":n="decimalFormatMismatch";break;case"currency":n="currencyFormatMismatch";break;case"percent":n="percentFormatMismatch"}var a=new Error(i),o={errorCode:n,parameterMap:{value:t,format:r.pat}};throw a.errorInfo=o,a}function E(e,r,n,i){var a=t.OraI18nUtils.getLocaleElementsMainNode(r),o={},l=function(e,r){var n,i=h(r);if(void 0===t.OraI18nUtils.numeringSystems[i])return e;var a=[];for(n=0;n<e.length;n++){var o=t.OraI18nUtils.numeringSystems[i].indexOf(e[n]);-1!==o?a.push(o):a.push(e[n])}return a.join("")}(e,i);b(r,o,n,i);var m=NaN,p=l.replace(/ /g,"");if(s.test(p))return m=parseFloat(l);var g=function(e,r,n,i){var a,o=t.OraI18nUtils.trimNumber(e),s="",u=!1,l=i.numbers[n.numberingSystem].plusSign,m=new RegExp("^"+l.replace(c,"\\$1"));o=o.replace(m,"");var p=t.OraI18nUtils.trimNumber(n.positivePrefix),g=t.OraI18nUtils.trimNumber(n.positiveSuffix),v=t.OraI18nUtils.trimNumber(n.negativePrefix),d=t.OraI18nUtils.trimNumber(n.negativeSuffix),f=new RegExp("^"+(p||"").replace(c,"\\$1")),y=new RegExp((g||"").replace(c,"\\$1")+"$"),h=new RegExp("^"+(v||"").replace(c,"\\$1")),b=new RegExp((d||"").replace(c,"\\$1")+"$");if(!0===h.test(o)&&!0===b.test(o))o=(o=o.replace(h,"")).replace(b,""),s="-",u=!0;else if(!0===f.test(o)&&!0===y.test(o))o=(o=o.replace(f,"")).replace(y,""),s="+",u=!0;else if("currency"===n.style){var F,S=n.currencyCode,x=S;if(void 0!==i.numbers.currencies[S]&&(x=i.numbers.currencies[S].symbol),void 0===n.currencyDisplay||"symbol"===n.currencyDisplay?F=x:"code"===n.currencyDisplay&&(F=S),void 0!==F){var D=(p||"").replace(F,""),O=(g||"").replace(F,""),N=(v||"").replace(F,""),E=(d||"").replace(F,"");f=new RegExp(("^"+D).replace(c,"\\$1")),y=new RegExp(O.replace(c,"\\$1")+"$"),h=new RegExp(("^"+N).replace(c,"\\$1")),b=new RegExp(E.replace(c,"\\$1")+"$"),!0===h.test(o)&&!0===b.test(o)?(o=(o=o.replace(h,"")).replace(b,""),s="-",u=!0):!0===f.test(o)&&!0===y.test(o)&&(o=(o=o.replace(f,"")).replace(y,""),s="+",u=!0)}}return u?a=[s,o]:"full"===n.lenientParse?(a=I(o,n))[2]=!0:U(n.style,n,e),a}(l,0,o,a),v=g[0],d=g[1];if(v=v||"+",g[2])return N(m=parseFloat(v+d),n,o,e);var f=function(e,r){var n,i,a={},o=r.decimalSeparator,s=r.groupingSeparator,u=e.replace(/ /g,""),l=r.exponential,c=u.indexOf(l.toLowerCase());c<0&&(c=u.indexOf(t.OraI18nUtils.toUpper(l))),c<0?(i=u,a.exponent=null):(i=u.substr(0,c),a.exponent=u.substr(c+l.length));var m=o,p=i.indexOf(m);p<0?(n=i,a.fraction=null):(n=i.substr(0,p),a.fraction=i.substr(p+m.length)),n=n.split(s).join("");var g=s.replace(/\u00A0/g," ");return s!==g&&(n=n.split(g).join("")),a.integer=n,a}(d,o),y=f.integer,F=f.fraction,S=f.exponent,x=v+y;if(null!==F&&(x+="."+F),null!==S){var D=function(e,r){var n,i=r.minusSign,a=r.plusSign,o=t.OraI18nUtils.trimNumber(e);return i=t.OraI18nUtils.trimNumber(i),a=t.OraI18nUtils.trimNumber(a),t.OraI18nUtils.startsWith(o,i)?n=["-",o.substr(i.length)]:t.OraI18nUtils.startsWith(o,t.OraI18nUtils.trimNumber(a))&&(n=["+",o.substr(a.length)]),n||["",o]}(S,o);x+="e"+(D[0]||"+")+D[1]}return u.test(x)?m=parseFloat(x):"full"===o.lenientParse?(x=I(l,o),m=parseFloat(x[0]+x[1])):U(o.style,o,e),N(m,n,o,e)}function M(e){var r=new SyntaxError('Unexpected character(s) encountered in the pattern "'+e+' An example of a valid pattern is "#,##0.###".'),t={errorCode:"optionValueInvalid",parameterMap:{propertyName:"pattern",propertyValue:e,propertyValueHint:"#,##0.###"}};throw r.errorInfo=t,r}function w(e,r,t,n){for(var i="",a=0;a<e.length;){var o=e.charAt(a);if(a+=1,"'"!==o){switch(o){case"¤":var s=t.currencyCode,u=s,l=s;void 0!==r.numbers.currencies[s]&&(u=r.numbers.currencies[s].displayName,l=r.numbers.currencies[s].symbol),void 0===t.currencyDisplay||"symbol"===t.currencyDisplay?o=l:"code"===t.currencyDisplay?o=s:(o=u,n.name=o);break;case"%":o=r.numbers[t.numberingSystem].percentSign;break;case"‰":o=r.numbers[t.numberingSystem].perMille;break;case"-":o=r.numbers[t.numberingSystem].minusSign}i=i.concat(o)}}return i}function P(e,r,n){var i={};return S(r,"OraNumberConverter.resolvedOptions"),b(e,i,r,n),i.numberingSystemKey=h(n),void 0===t.OraI18nUtils.numeringSystems[i.numberingSystemKey]&&(i.numberingSystemKey="latn"),i}function j(e,r,t){var n={locale:t,style:void 0===e.style?"decimal":e.style,useGrouping:void 0===r.useGrouping||r.useGrouping,numberingSystem:e.numberingSystemKey};n.minimumIntegerDigits=e.minimumIntegerDigits,n.minimumFractionDigits=e.minimumFractionDigits,n.maximumFractionDigits=e.maximumFractionDigits,"decimal"===e.style&&void 0!==r.decimalFormat&&(n.decimalFormat=r.decimalFormat),"currency"===e.style&&void 0!==r.currencyFormat&&(n.currencyFormat=r.currencyFormat),"currency"===e.style&&(n.currency=r.currency,n.currencyDisplay=void 0===r.currencyDisplay?"symbol":r.currencyDisplay),void 0!==r.unit&&(n.unit=r.unit),void 0!==r.pattern&&(n.pattern=r.pattern);var i=r.roundingMode,a=r.roundDuringParse;void 0!==i&&(n.roundingMode=i),void 0!==a&&(n.roundDuringParse=a);var o=e.lenientParse;void 0!==o&&(n.lenientParse=o);var s=e.separators;return void 0!==s&&(n.separators=s),n.virtualKeyboardHint=function(e,r){var t="text";switch(r.style){case"unit":t="text";break;case"currency":case"percent":t=void 0===r.pattern?"text":_(e,r);break;default:t=void 0===r.pattern?"short"===r.decimalFormat||"long"===r.decimalFormat?"text":function(e,r){if(void 0===r.useGrouping||r.useGrouping){if("."===e.decimalSeparator&&""===e.groupingSeparator)return"number"}else if("."===e.decimalSeparator)return"number";return"text"}(e,r):_(e,r)}return t}(e,r),n}function _(e,r){var t;if(t=r.pattern,/[^0-9.#]/i.test(t))return"text";var n=function(e){return-1!==e.indexOf(",")}(r.pattern),i=function(e){return-1!==e.indexOf(".")}(r.pattern);if(n&&i){if(""!==e.groupingSeparator||"."!==e.decimalSeparator)return"text";if(e.groupingSeparator===e.decimalSeparator)return"text"}return i&&!n&&"."!==e.decimalSeparator||!i&&n&&""!==e.groupingSeparator?"text":"number"}return{getInstance:function(){return e||(e={format:function(e,r,t,n){(arguments.length<=2||void 0===t)&&(t={useGrouping:!0,style:"decimal"}),S(t,"OraNumberConverter.format");var i={};return b(r,i,t,n),O(e,t,r,i,n)},parse:function(e,r,t,n){return"number"==typeof e?e:"[object Number]"===Object.prototype.toString.call(e)?Number(e):((arguments.length<=2||void 0===t)&&(t={useGrouping:!0,style:"decimal"}),S(t,"OraNumberConverter.parse"),E(e,r,t,n))},resolvedOptions:function(e,r,n){(arguments.length<3||void 0===n)&&(n=t.OraI18nUtils.getLocaleElementsMainNodeKey(e)),(arguments.length<2||void 0===r)&&(r={useGrouping:!0,style:"decimal"});var i=P(e,r,n);return j(i,r,n)}}),e}}}(),c=function(){this.Init()};
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */oj.Object.createSubclass(c,i,"oj.NumberConverter"),c.prototype.Init=function(e){c.superclass.Init.call(this,e)},c.prototype.format=function(e){return c.superclass.format.call(this,e)},c.prototype.parse=function(e){return c.superclass.parse.call(this,e)};
/**
   * @license
   * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
   * The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   * @ignore
   */
var m=function(e){this.Init(e)};s.Object.createSubclass(m,c,"oj.IntlNumberConverter"),m.prototype.Init=function(e){m.superclass.Init.call(this,e)},m.prototype._getWrapped=function(){return this._wrapped||(this._wrapped=l.getInstance()),this._wrapped},m.prototype.format=function(e){if(null==e||"string"==typeof e&&0===s.StringUtils.trim(""+e).length||"number"==typeof e&&isNaN(e))return"";var t,i=o.getLocale(),u=n.__getBundle(),l=this.resolvedOptions();try{t=this._getWrapped().format(e,u,l,i)}catch(r){throw this._processConverterError(r,e)}if("NaN"===t){var c=a.getTranslatedString("oj-converter.number.invalidNumberFormat.summary",{value:e}),m=a.getTranslatedString("oj-converter.number.invalidNumberFormat.detail");r.error(c+" "+m)}return t},m.prototype.getHint=function(){return null},m.prototype.getOptions=function(){return m.superclass.getOptions.call(this)},m.prototype.parse=function(e){var r,t,i;if(null==e||""===e)return null;r=o.getLocale(),t=n.__getBundle(),i=this.resolvedOptions();try{return this._getWrapped().parse(s.StringUtils.trim(e),t,i,r)}catch(r){throw this._processConverterError(r,e)}},m.prototype.resolvedOptions=function(){var e,t=o.getLocale();if(t!==this._locale||!this._resolvedOptions){e=n.__getBundle();try{if(!e)return r.error("locale bundle for the current locale %s is unavailable",t),{};this._resolvedOptions=this._getWrapped().resolvedOptions(e,this.getOptions(),t),this._locale=t}catch(e){throw this._processConverterError(e)}}return this._resolvedOptions},m.prototype._processConverterError=function(e,r){var n,i,o,l,c=e.errorInfo;if(c){var m=c.errorCode,p=c.parameterMap;switch(s.Assert.assertObject(p),m){case"optionTypesMismatch":case"optionTypeInvalid":case"optionOutOfRange":case"optionValueInvalid":n=t.IntlConverterUtils.__getConverterOptionError(m,p);break;case"decimalFormatMismatch":o="oj-converter.number.decimalFormatMismatch.summary";break;case"currencyFormatMismatch":o="oj-converter.number.currencyFormatMismatch.summary";break;case"percentFormatMismatch":o="oj-converter.number.percentFormatMismatch.summary";break;case"unsupportedParseFormat":l=a.getTranslatedString("oj-converter.number.shortLongUnsupportedParse.summary"),i=a.getTranslatedString("oj-converter.number.shortLongUnsupportedParse.detail"),n=new u.ConverterError(l,i)}o&&(l=a.getTranslatedString(o,{value:r||p.value,format:p.format}),i=a.getTranslatedString("oj-converter.hint.detail",{exampleValue:this._getHintValue()}),n=new u.ConverterError(l,i))}return n||(l=e.message,i=e.message,n=new u.ConverterError(l,i)),n},m.prototype._getHintValue=function(){var e="";try{e=this.format(12345.98765)}catch(t){t instanceof u.ConverterError&&(e="",r.error("error retrieving hint value in format"))}return e},e.IntlNumberConverter=m,e.NumberConverter=c,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ojconverter-number.js.map